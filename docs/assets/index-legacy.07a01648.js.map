{"version":3,"file":"index-legacy.07a01648.js","sources":["../../vite/modulepreload-polyfill","../../src/constants.ts","../../node_modules/wblib/lib/env.js","../../node_modules/wblib/lib/is.js","../../node_modules/wblib/lib/destroyable.js","../../node_modules/wblib/lib/dom.js","../../node_modules/wblib/lib/emitter.js","../../node_modules/wblib/lib/rect.js","../../node_modules/wblib/lib/component.js","../../node_modules/wblib/lib/drag.js","../../node_modules/wblib/lib/format.js","../../node_modules/wblib/lib/fn.js","../../src/chapter.ts","../../src/heat-map.ts","../../src/marker.ts","../../src/thumbnail.ts","../../src/progress-bar.ts","../../demo/m1.png","../../demo/m2.png","../../demo/m3.png","../../demo/index.js","../../demo/t1.jpg","../../demo/t2.jpg","../../demo/t3.jpg"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const EVENT = {\n  MARKER_CLICK: 'markerClick',\n  DRAGGING: 'dragging',\n  DRAGEND: 'dragend',\n  MOUSEMOVE: 'mousemove',\n  MOUSELEAVE: 'mouseleave',\n} as const;\n","const isBrowser = typeof window !== 'undefined';\r\nconst isTouch = isBrowser && ('ontouchstart' in window || navigator.maxTouchPoints > 0);\n\nexport { isBrowser, isTouch };\n","const toString = Object.prototype.toString;\r\nfunction isString(o) {\r\n    return typeof o === 'string' || o instanceof String;\r\n}\r\nfunction isBool(o) {\r\n    return o === true || o === false || (toString.call(o) === '[object Boolean]');\r\n}\r\nfunction isFunction(o) {\r\n    return typeof o === 'function';\r\n}\r\nfunction isNumber(o) {\r\n    return typeof o === 'number' || (toString.call(o) === '[object Number]');\r\n}\r\nfunction isValidNumber(o) {\r\n    const r = isNumber(o);\r\n    if (!r)\r\n        return r;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return (!isNaN(o) && isFinite(o));\r\n}\n\nexport { isBool, isFunction, isNumber, isString, isValidNumber };\n","import { isBrowser } from './env.js';\nimport { isBool } from './is.js';\n\nlet thirdOptsSupported = false;\r\nif (isBrowser) {\r\n    try {\r\n        const options = Object.defineProperty({}, 'once', { get() { thirdOptsSupported = true; } });\r\n        window.addEventListener('test', null, options);\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    catch (e) { }\r\n}\r\nclass DomListener {\r\n    node;\r\n    type;\r\n    handler;\r\n    options;\r\n    constructor(node, type, handler, options) {\r\n        this.node = node;\r\n        this.type = type;\r\n        this.handler = handler;\r\n        this.options = options;\r\n        this.options = isBool(options) ? options : options ? (thirdOptsSupported && options) : false;\r\n        node.addEventListener(type, handler, this.options);\r\n    }\r\n    destroy() {\r\n        if (!this.handler)\r\n            return;\r\n        this.node.removeEventListener(this.type, this.handler, this.options);\r\n        this.node = null;\r\n        this.handler = null;\r\n        this.options = null;\r\n    }\r\n}\r\nconst destroyableMap = new Map();\r\nfunction getDestroyableMap() {\r\n    return destroyableMap;\r\n}\r\nfunction addDestroyable(key, destroyable) {\r\n    if (!destroyableMap.has(key))\r\n        destroyableMap.set(key, []);\r\n    destroyableMap.get(key).push(destroyable);\r\n    return destroyable;\r\n}\r\nfunction callAndRemoveDestroyable(key, destroyable) {\r\n    if (!destroyable)\r\n        return;\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.set(key, destroyableMap.get(key).filter((x) => x !== destroyable));\r\n    }\r\n    destroyable.destroy();\r\n}\r\nfunction destroy(key) {\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.get(key).forEach((item) => item.destroy());\r\n        destroyableMap.delete(key);\r\n    }\r\n}\r\nfunction addDestroyableListener(key, el, type, listener, options) {\r\n    const domListener = new DomListener(el, type, listener, options);\r\n    if (key)\r\n        addDestroyable(key, domListener);\r\n    return domListener;\r\n}\n\nexport { DomListener, addDestroyable, addDestroyableListener, callAndRemoveDestroyable, destroy, getDestroyableMap };\n","import { isString } from './is.js';\n\nconst SELECTOR_REGEX = /([\\w-]+)?(?:#([\\w-]+))?((?:\\.(?:[\\w-]+))*)/;\r\nfunction $(desc, attrs, children, classPrefix = '') {\r\n    let match = [];\r\n    if (desc)\r\n        match = SELECTOR_REGEX.exec(desc) || [];\r\n    const el = document.createElement(match[1] || 'div');\r\n    if (match[2])\r\n        el.id = match[3];\r\n    if (match[3])\r\n        el.className = match[3].replace(/\\./g, ` ${classPrefix}`).trim();\r\n    if (attrs) {\r\n        Object.keys(attrs).forEach((name) => {\r\n            const value = attrs[name];\r\n            if (value === undefined)\r\n                return;\r\n            if (/^on\\w+$/.test(name)) {\r\n                el[name] = value;\r\n            }\r\n            else if (name === 'selected') {\r\n                if (value) {\r\n                    el.setAttribute(name, 'true');\r\n                }\r\n            }\r\n            else {\r\n                el.setAttribute(name, value);\r\n            }\r\n        });\r\n    }\r\n    if (children) {\r\n        if (isString(children)) {\r\n            el.innerHTML = children;\r\n        }\r\n        else {\r\n            children.forEach((c) => el.appendChild(c));\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction removeNode(node) {\r\n    if (!node)\r\n        return;\r\n    if (node.remove) {\r\n        node.remove();\r\n    }\r\n    else if (node.parentNode) {\r\n        node.parentNode.removeChild(node);\r\n    }\r\n}\r\nfunction show(node) {\r\n    node.style.display = '';\r\n}\r\nfunction hide(node) {\r\n    node.style.display = 'none';\r\n}\r\nfunction addClass(dom, cls = '', prefix = '') {\r\n    cls = cls.trim();\r\n    if (!cls)\r\n        return dom;\r\n    if (dom.classList) {\r\n        cls.split(' ').forEach((c) => dom.classList.add(prefix + c));\r\n    }\r\n    else {\r\n        const oldCls = (dom.className && dom.className.baseVal) || '';\r\n        dom.setAttribute('class', (oldCls ? `${oldCls} ` : '') + cls.split(' ').map((c) => prefix + c).join(' '));\r\n    }\r\n    return dom;\r\n}\r\nfunction removeClass(dom, cls, prefix = '') {\r\n    dom.classList.remove(prefix + cls);\r\n    return dom;\r\n}\r\nfunction containClass(dom, cls, prefix = '') {\r\n    return dom.classList.contains(prefix + cls);\r\n}\r\nfunction toggleClass(dom, cls, force, prefix = '') {\r\n    cls = prefix + cls;\r\n    if (force) {\r\n        dom.classList.add(cls);\r\n        return true;\r\n    }\r\n    if (force === false) {\r\n        dom.classList.remove(cls);\r\n        return true;\r\n    }\r\n    return dom.classList.toggle(cls, force);\r\n}\r\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport { $, addClass, containClass, hide, removeClass, removeNode, show, svgNS, toggleClass };\n","import { isFunction } from './is.js';\n\n/**\r\n * @see https://github.com/primus/eventemitter3\r\n *\r\n * Representation of a single event listener.\r\n *\r\n * @param {Function} fn The listener function.\r\n * @param {*} context The context to invoke the listener with.\r\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\r\n * @constructor\r\n * @private\r\n */\r\nclass EE {\r\n    fn;\r\n    context;\r\n    once;\r\n    constructor(fn, context, once) {\r\n        this.fn = fn;\r\n        this.context = context;\r\n        this.once = once;\r\n        this.once = once || false;\r\n    }\r\n}\r\n/**\r\n * Minimal `EventEmitter` interface that is molded against the Node.js\r\n * `EventEmitter` interface.\r\n *\r\n * @constructor\r\n * @public\r\n */\r\nclass EventEmitter {\r\n    _events = Object.create(null);\r\n    _eventsCount = 0;\r\n    emitAsync(evt, a1, time = 0) {\r\n        setTimeout(() => this.emit(evt, a1), time);\r\n    }\r\n    emit(evt, a1) {\r\n        if (!this._events[evt])\r\n            return;\r\n        const listeners = this._events[evt];\r\n        if (listeners.fn) {\r\n            if (listeners.once)\r\n                this.off(evt, listeners.fn, undefined, true);\r\n            listeners.fn.call(listeners.context, a1);\r\n        }\r\n        else {\r\n            const length = listeners.length;\r\n            for (let i = 0; i < length; i++) {\r\n                if (listeners[i].once)\r\n                    this.off(evt, listeners[i].fn, undefined, true);\r\n                listeners[i].fn.call(listeners[i].context, a1);\r\n            }\r\n        }\r\n    }\r\n    on(evt, fn, context, once = false) {\r\n        if (!isFunction(fn)) {\r\n            throw new TypeError('The listener must be a function');\r\n        }\r\n        const listener = new EE(fn, context || this, once);\r\n        // eslint-disable-next-line no-unused-expressions\r\n        if (!this._events[evt])\r\n            this._events[evt] = listener, this._eventsCount++;\r\n        else if (!this._events[evt].fn)\r\n            this._events[evt].push(listener);\r\n        else\r\n            this._events[evt] = [this._events[evt], listener];\r\n        return { destroy: this.off.bind(this, evt, fn) };\r\n    }\r\n    once(event, fn, context) {\r\n        return this.on(event, fn, context, true);\r\n    }\r\n    off(evt, fn, context, once) {\r\n        if (!evt) {\r\n            this._events = Object.create(null);\r\n            this._eventsCount = 0;\r\n            return this;\r\n        }\r\n        if (!this._events[evt])\r\n            return this;\r\n        if (!fn) {\r\n            this.clearEvent(evt);\r\n            return this;\r\n        }\r\n        const listeners = this._events[evt];\r\n        const events = [];\r\n        if (listeners.fn) {\r\n            if (listeners.fn === fn\r\n                && (!once || listeners.once)\r\n                && (!context || listeners.context === context)) {\r\n                this.clearEvent(evt);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0, length = listeners.length; i < length; i++) {\r\n                if (listeners[i].fn !== fn\r\n                    || (once && !listeners[i].once)\r\n                    || (context && listeners[i].context !== context)) {\r\n                    events.push(listeners[i]);\r\n                }\r\n            }\r\n            //\r\n            // Reset the array, or remove it completely if we have no more listeners.\r\n            //\r\n            if (events.length)\r\n                this._events[evt] = events.length === 1 ? events[0] : events;\r\n            else\r\n                this.clearEvent(evt);\r\n        }\r\n        return this;\r\n    }\r\n    clearEvent(evt) {\r\n        if (--this._eventsCount === 0)\r\n            this._events = Object.create(null);\r\n        else\r\n            delete this._events[evt];\r\n    }\r\n}\n\nexport { EventEmitter };\n","class Rect {\r\n    el;\r\n    rect;\r\n    constructor(el) {\r\n        this.el = el;\r\n        this.rect = {};\r\n    }\r\n    get width() {\r\n        this.tryUpdate(this.rect.width);\r\n        return this.rect.width;\r\n    }\r\n    get height() {\r\n        this.tryUpdate(this.rect.height);\r\n        return this.rect.height;\r\n    }\r\n    get x() {\r\n        this.tryUpdate(this.rect.left);\r\n        return this.rect.left;\r\n    }\r\n    get y() {\r\n        this.tryUpdate(this.rect.top);\r\n        return this.rect.top;\r\n    }\r\n    get bottom() {\r\n        return this.rect.bottom;\r\n    }\r\n    get right() {\r\n        return this.rect.right;\r\n    }\r\n    get changed() {\r\n        const newRect = this.el.getBoundingClientRect();\r\n        const ret = (newRect.top !== this.rect.top\r\n            || newRect.left !== this.rect.left\r\n            || newRect.width !== this.rect.width\r\n            || newRect.height !== this.rect.height);\r\n        if (ret)\r\n            this.rect = newRect;\r\n        return ret;\r\n    }\r\n    tryUpdate(v) {\r\n        if (!v)\r\n            this.update();\r\n    }\r\n    update = () => {\r\n        this.rect = this.el.getBoundingClientRect();\r\n    };\r\n    destroy() {\r\n        this.el = null;\r\n        this.rect = null;\r\n    }\r\n}\n\nexport { Rect };\n","import { removeNode, $ } from './dom.js';\nimport { isString } from './is.js';\nimport { destroy } from './destroyable.js';\nimport { EventEmitter } from './emitter.js';\n\nfunction getEl(container, desc, attrs, children, classPrefix) {\r\n    let el;\r\n    if (desc && !isString(desc)) {\r\n        el = desc;\r\n    }\r\n    else {\r\n        el = $(desc, attrs, children, classPrefix);\r\n    }\r\n    if (container)\r\n        container.appendChild(el);\r\n    return el;\r\n}\r\nclass Component {\r\n    el;\r\n    constructor(container, desc, attrs, children, classPrefix) {\r\n        this.el = getEl(container, desc, attrs, children, classPrefix);\r\n    }\r\n    destroy() {\r\n        removeNode(this.el);\r\n        destroy(this);\r\n    }\r\n}\r\nclass EventEmitterComponent extends EventEmitter {\r\n    el;\r\n    constructor(container, desc, attrs, children, classPrefix) {\r\n        super();\r\n        this.el = getEl(container, desc, attrs, children, classPrefix);\r\n    }\r\n    destroy() {\r\n        removeNode(this.el);\r\n        destroy(this);\r\n    }\r\n}\n\nexport { Component, EventEmitterComponent };\n","class Drag {\r\n    el;\r\n    start;\r\n    move;\r\n    end;\r\n    pending = false;\r\n    lastEv;\r\n    constructor(dom, start, move, end) {\r\n        this.el = dom;\r\n        this.start = start;\r\n        this.move = move;\r\n        this.end = end;\r\n        dom.addEventListener('pointerdown', this.downHandler, true);\r\n        dom.addEventListener('pointerup', this.upHandler, true);\r\n        dom.addEventListener('pointercancel', this.upHandler, true);\r\n    }\r\n    downHandler = (ev) => {\r\n        ev.preventDefault();\r\n        this.el.setPointerCapture(ev.pointerId);\r\n        this.el.addEventListener('pointermove', this.moveHandler, true);\r\n        this.start(ev);\r\n    };\r\n    moveHandler = (ev) => {\r\n        ev.preventDefault();\r\n        this.lastEv = ev;\r\n        if (this.pending)\r\n            return;\r\n        this.pending = true;\r\n        requestAnimationFrame(this.handlerMove);\r\n    };\r\n    handlerMove = () => {\r\n        this.move(this.lastEv);\r\n        this.pending = false;\r\n    };\r\n    upHandler = (ev) => {\r\n        ev.preventDefault();\r\n        try {\r\n            this.el.releasePointerCapture(ev.pointerId);\r\n        }\r\n        catch (error) {\r\n            // ignore\r\n        }\r\n        this.el.removeEventListener('pointermove', this.moveHandler, true);\r\n        if (this.end) {\r\n            requestAnimationFrame(() => this.end(ev));\r\n        }\r\n    };\r\n    destroy() {\r\n        if (!this.el)\r\n            return;\r\n        this.el.removeEventListener('pointerdown', this.downHandler, true);\r\n        this.el.removeEventListener('pointerup', this.upHandler, true);\r\n        this.el.removeEventListener('pointercancel', this.upHandler, true);\r\n        this.el.removeEventListener('pointermove', this.moveHandler, true);\r\n        this.start = null;\r\n        this.move = null;\r\n        this.end = null;\r\n        this.lastEv = null;\r\n        this.el = null;\r\n    }\r\n}\n\nexport { Drag };\n","function padStart(v, len = 2, str = '0') {\r\n    v = String(v);\r\n    if (v.length >= len)\r\n        return v;\r\n    for (let i = 0, l = len - v.length; i < l; i++) {\r\n        v = str + v;\r\n    }\r\n    return v;\r\n}\r\nfunction formatTime(seconds) {\r\n    // eslint-disable-next-line no-restricted-globals\r\n    if (!isFinite(seconds) || isNaN(seconds))\r\n        return '';\r\n    if (!seconds)\r\n        return '0:00';\r\n    const isNeg = seconds < 0;\r\n    if (isNeg)\r\n        seconds *= -1;\r\n    let ret;\r\n    seconds = Math.round(seconds);\r\n    if (seconds < 60) {\r\n        ret = `0:${padStart(seconds)}`;\r\n    }\r\n    else if (seconds < 3600) {\r\n        ret = `${~~(seconds / 60)}:${padStart(seconds % 60)}`;\r\n    }\r\n    else {\r\n        ret = `${~~(seconds / 3600)}:${padStart(~~((seconds % 3600) / 60))}:${padStart(seconds % 60)}`;\r\n    }\r\n    if (isNeg)\r\n        ret = `-${ret}`;\r\n    return ret;\r\n}\r\nfunction clamp(n, lower = 0, upper = 1) {\r\n    return Math.max(Math.min(n, upper), lower);\r\n}\n\nexport { clamp, formatTime };\n","function throttle(fn, ctx) {\r\n    let pending = false;\r\n    let first = true;\r\n    let args = null;\r\n    return function () {\r\n        args = arguments;\r\n        if (first) {\r\n            first = false;\r\n            return fn.apply(ctx, args);\r\n        }\r\n        if (pending)\r\n            return;\r\n        pending = true;\r\n        requestAnimationFrame(() => {\r\n            fn.apply(ctx, args);\r\n            pending = false;\r\n        });\r\n    };\r\n}\n\nexport { throttle };\n","import { Component, $ } from 'wblib';\n\nexport class Chapter extends Component {\n  private bufferedEl: HTMLElement;\n\n  private playedEl: HTMLElement;\n\n  private hoverEl: HTMLElement;\n\n  realEl: HTMLElement;\n\n  duration = 0;\n\n  constructor(\n    container: HTMLElement | DocumentFragment,\n    duration: number,\n    public start: number,\n    public end: number,\n    public title?: string,\n  ) {\n    super(container, '.ppbar_chapter_i');\n    const wrapEl = this.realEl = this.el.appendChild($('.ppbar_chapter_i_w'));\n    this.bufferedEl = wrapEl.appendChild($('.ppbar_chapter_i_b'));\n    this.hoverEl = wrapEl.appendChild($('.ppbar_chapter_i_h'));\n    this.playedEl = wrapEl.appendChild($('.ppbar_chapter_i_p'));\n    this.update(start, end, duration, title);\n  }\n\n  update(start: number, end: number, duration: number, title?: string) {\n    this.start = start;\n    this.end = end;\n    this.duration = end - start;\n    this.title = title || '';\n    this.updateFlex(duration);\n  }\n\n  updateFlex(duration: number) {\n    this.el.style.flex = String(Math.max(0, this.duration / duration));\n  }\n\n  match(time: number) {\n    return time >= this.start && time <= this.end;\n  }\n\n  updateHover(time: number) {\n    return this.setBar(time, this.hoverEl);\n  }\n\n  updateBuffer(time: number) {\n    return this.setBar(time, this.bufferedEl);\n  }\n\n  updatePlayed(time: number) {\n    return this.setBar(time, this.playedEl);\n  }\n\n  private setBar(time: number, dom: HTMLElement) {\n    const match = this.match(time);\n    dom.style.transform = `scaleX(${\n      match ? ((time - this.start) / this.duration) : time > this.end ? 1 : 0\n    })`;\n    return match;\n  }\n}\n","import {\n  Component, svgNS,\n} from 'wblib';\n\nlet heatId = 0;\n\nexport class HeatMap extends Component {\n  private pathEl: SVGPathElement;\n\n  constructor(\n    container: HTMLElement,\n    dots?: number[][],\n    max?: number,\n    flex?: string,\n  ) {\n    super(container, '.ppbar_heat_i');\n\n    const svg = document.createElementNS(svgNS, 'svg');\n    this.pathEl = document.createElementNS(svgNS, 'path');\n\n    const defs = document.createElementNS(svgNS, 'defs');\n    const clipPath = document.createElementNS(svgNS, 'clipPath');\n    const rect = document.createElementNS(svgNS, 'rect');\n\n    svg.setAttribute('viewBox', '0 0 1000 100');\n    svg.setAttribute('preserveAspectRatio', 'none');\n    svg.setAttribute('width', '100%');\n    clipPath.setAttribute('id', `ppb${heatId}`);\n    rect.setAttribute('clip-path', `url(#ppb${heatId})`);\n    rect.setAttribute('fill', 'white');\n    rect.setAttribute('fill-opacity', '0.2');\n    rect.setAttribute('width', '100%');\n    rect.setAttribute('height', '100%');\n    rect.setAttribute('x', '0');\n    rect.setAttribute('y', '0');\n\n    clipPath.appendChild(this.pathEl);\n    defs.appendChild(clipPath);\n    svg.appendChild(defs);\n    svg.appendChild(rect);\n\n    heatId++;\n\n    if (dots && max) {\n      this.update(dots, max, flex);\n    }\n\n    this.el.appendChild(svg);\n  }\n\n  update(dots: number[][], max: number, flex?: string) {\n    const path: string[] = ['M0 100'];\n    let prev = [0, 100];\n    let cur: number[] = [];\n    let next: number[] | undefined;\n    let dx1 = 0;\n    let dy1 = 0;\n    let dx2;\n    let dy2;\n\n    const getXY = (d?: number[]) => {\n      if (!d) return;\n      return [d[0], (1 - d[1] / max) * 100];\n    };\n\n    dots.forEach((d, i) => {\n      cur = next || getXY(d)!;\n      next = getXY(dots[i + 1]) || [1000, 100];\n\n      const m = this.slope(prev, next);\n      dx2 = (next[0] - cur[0]) * -0.3;\n      dy2 = dx2 * m * 0.6;\n\n      path.push(`C ${(prev[0] - dx1).toFixed(1)} ${(prev[1] - dy1).toFixed(1)}, ${\n        (cur[0] + dx2).toFixed(1)} ${(cur[1] + dy2).toFixed(1)}, ${\n        cur[0].toFixed(1)} ${cur[1].toFixed(1)}`);\n\n      dx1 = dx2;\n      dy1 = dy2;\n      prev = cur;\n    });\n\n    path.push(`C ${(cur[0] - dx1).toFixed(1)} ${(cur[1] - dy1).toFixed(1)}, 1000 100, 1000 100`);\n    this.pathEl.setAttributeNS(null, 'd', path.join(' '));\n    this.el.style.flex = flex || '1';\n  }\n\n  private slope(a: number[], b: number[]) {\n    return (b[1] - a[1]) / (b[0] - a[0]);\n  }\n}\n","import { Component, $, addDestroyableListener } from 'wblib';\nimport { EVENT } from './constants';\nimport { ProgressBar } from './progress-bar';\nimport { RequiredConfig } from './types';\n\nexport class Marker extends Component {\n  time: number;\n\n  title?: string;\n\n  private tipEl: HTMLElement;\n\n  constructor(prog: ProgressBar, container: HTMLElement, private cfg: RequiredConfig['markers'][0]) {\n    super(container, '.ppbar_marker_i');\n\n    this.tipEl = this.el.appendChild($('.ppbar_marker_i_tip'));\n    if (cfg.title) {\n      this.title = cfg.title;\n      this.tipEl.textContent = cfg.title;\n    }\n\n    this.el.appendChild($('.ppbar_marker_i_d'));\n\n    if (cfg.image) {\n      const img = new Image(cfg.size?.[0], cfg.size?.[1]);\n      img.src = cfg.image;\n      this.el.appendChild(img);\n    } else if (cfg.el) {\n      if (cfg.size && cfg.size.length > 1) {\n        cfg.el.style.width = `${cfg.size[0]}px`;\n        cfg.el.style.height = `${cfg.size[1]}px`;\n      }\n      this.el.appendChild(cfg.el);\n    }\n\n    addDestroyableListener(this, this.el, 'click', () => {\n      prog.emit(EVENT.MARKER_CLICK, this.cfg);\n    });\n\n    this.time = cfg.time;\n    this.update(prog.duration);\n  }\n\n  update(duration: number) {\n    if (duration) {\n      if (this.time < 0) {\n        this.el.style.right = `${-this.time / duration * 100}%`;\n      } else {\n        this.el.style.left = `${this.time / duration * 100}%`;\n      }\n    }\n  }\n}\n","import {\n  Component, formatTime, clamp, Rect, $, addDestroyable,\n} from 'wblib';\nimport { ProgressBar } from './progress-bar';\nimport { ProgressConfig } from './types';\n\nexport class Thumbnail extends Component {\n  private opts = {\n    start: 0,\n    gap: 10,\n    col: 5,\n    row: 5,\n    width: 160,\n    height: 90,\n    images: [],\n  };\n\n  private imgEl: HTMLElement;\n\n  private timeEl: HTMLElement;\n\n  private titleEl: HTMLElement;\n\n  private rect: Rect;\n\n  private thumbImgPrePic?: number;\n\n  private ssGapRatio?: number;\n\n  constructor(\n    container: HTMLElement,\n    private prog: ProgressBar,\n  ) {\n    super(container, '.ppbar_thumb');\n\n    this.imgEl = this.el.appendChild($('.ppbar_thumb_img'));\n    this.titleEl = this.el.appendChild($('.ppbar_thumb_title'));\n    this.timeEl = this.el.appendChild($('.ppbar_thumb_time'));\n    this.rect = addDestroyable(this, new Rect(this.el));\n\n    this.updateOptions(this.prog.config.thumbnail);\n  }\n\n  updateOptions(cfg: ProgressConfig['thumbnail']) {\n    if (cfg === false) {\n      this.el.style.opacity = '0';\n      return;\n    }\n    this.el.style.opacity = '1';\n    const opts = Object.assign(this.opts, cfg);\n\n    if (opts.images.length) {\n      this.imgEl.style.display = 'block';\n      this.titleEl.style.width = this.imgEl.style.width = `${opts.width}px`;\n      this.imgEl.style.height = `${opts.height}px`;\n      this.thumbImgPrePic = opts.col * opts.row;\n      this.ssGapRatio = opts.start / opts.gap;\n    } else {\n      this.imgEl.style.display = 'none';\n    }\n    this.rect.update();\n  }\n\n  update(time: number, x: number, maxX: number) {\n    if (this.opts.images.length) {\n      const thumb = this.getCurrentThumb(time);\n      if (thumb) {\n        this.imgEl.style.backgroundImage = `url(${thumb.url})`;\n        this.imgEl.style.backgroundPosition = `-${thumb.x}px -${thumb.y}px`;\n      }\n    } else {\n      this.rect.update();\n    }\n\n    const live = this.prog.live;\n    this.timeEl.textContent = `${live ? '-' : ''}${formatTime(live ? this.prog.duration - time : time)}`;\n\n    const { markers, chapters } = this.prog;\n    let title;\n    if (markers.length) {\n      for (let i = 0, l = markers.length, item; i < l; i++) {\n        item = markers[i];\n        if (time >= item.time && time < (item.time + 2)) {\n          title = item.title;\n          break;\n        }\n      }\n    }\n    if (!title && chapters.length) {\n      for (let i = 0, l = chapters.length, item; i < l; i++) {\n        item = chapters[i];\n        if (time >= item.start && time <= item.end) {\n          title = item.title;\n          break;\n        }\n      }\n    }\n\n    this.titleEl.textContent = title || '';\n    const half = this.rect.width / 2;\n    this.el.style.left = `${clamp(x - half, 0, Math.max(0, maxX - 2 * half))}px`;\n  }\n\n  private getCurrentThumb(time: number) {\n    const i = Math.max(time / this.opts.gap - this.ssGapRatio!, 0) | 0;\n    const url = this.opts.images[(i / this.thumbImgPrePic!) | 0];\n    if (!url) return;\n    const x = (i % this.opts.col) * this.opts.width;\n    const y = ~~((i % this.thumbImgPrePic!) / this.opts.row) * this.opts.height;\n    return { url, x, y };\n  }\n}\n","import {\n  $, addDestroyable, addDestroyableListener, Rect, throttle, Drag, isNumber, isValidNumber, clamp, isString,\n  EventEmitterComponent,\n  toggleClass,\n  isTouch,\n  hide,\n} from 'wblib';\nimport { Chapter } from './chapter';\nimport { EVENT } from './constants';\nimport { HeatMap } from './heat-map';\nimport { Marker } from './marker';\nimport { Thumbnail } from './thumbnail';\nimport { ProgressEventType, ProgressConfig, RequiredConfig } from './types';\n\nexport class ProgressBar extends EventEmitterComponent<ProgressEventType> {\n  config: ProgressConfig;\n\n  rect: Rect;\n\n  duration = 0;\n\n  rotate = 0;\n\n  live = false;\n\n  chapters: Chapter[] = [];\n\n  markers: Marker[] = [];\n\n  headMaps: HeatMap[] = [];\n\n  thumbnail: Thumbnail;\n\n  private curChapter = 0;\n\n  private prevActiveHeat?: HTMLElement;\n\n  private prevActiveChapter?: HTMLElement;\n\n  private dragging = false;\n\n  private chapterEl: HTMLElement;\n\n  private markerEl: HTMLElement;\n\n  private heatEl: HTMLElement;\n\n  private dotEl: HTMLElement;\n\n  constructor(container?: HTMLElement | DocumentFragment, config?: ProgressConfig) {\n    super(container, '.ppbar');\n    this.config = { ...config };\n    const { duration, live, rotate } = this.config;\n    this.rotate = rotate || 0;\n    this.updateDuration(duration);\n    this.live = live!;\n\n    this.heatEl = this.el.appendChild($('.ppbar_heat'));\n    this.chapterEl = this.el.appendChild($('.ppbar_chapter'));\n    this.markerEl = this.el.appendChild($('.ppbar_marker'));\n    this.dotEl = this.el.appendChild($('.ppbar_dot'));\n    this.updateDot();\n    this.updateHoverClass();\n\n    this.rect = addDestroyable(this, new Rect(this.el));\n    addDestroyable(this, new Drag(this.chapterEl, this.onDragStart, this.onDragging, (ev: MouseEvent) => {\n      this.dragging = false;\n      if (isTouch) hide(this.thumbnail.el);\n      this.emit(EVENT.DRAGEND, this.getCurrentTime(this.getLeft(ev)));\n    }));\n    addDestroyableListener(this, this.el, 'mousemove', throttle((ev: MouseEvent) => this.onMousemove(ev)), true);\n    addDestroyableListener(this, this.el, 'mouseleave', throttle(this.onMouseleave), false);\n\n    this.setChapters();\n    this.setMarkers();\n    this.setHeatMaps();\n\n    this.thumbnail = addDestroyable(this, new Thumbnail(this.el, this));\n\n    if (this.live) this.updatePlayed(this.duration);\n\n    if ((window as any).ResizeObserver) {\n      const ro = new ResizeObserver(throttle(() => this.updateSize()));\n      ro.observe(this.el);\n      addDestroyable(this, { destroy: () => ro.disconnect() });\n    }\n\n    this.updateSize();\n  }\n\n  updateSize() {\n    this.rect.update();\n  }\n\n  updateRotate(r: RequiredConfig['rotate']) {\n    this.rotate = r;\n    setTimeout(() => this.updateSize());\n  }\n\n  updateDuration(duration?: number) {\n    this.duration = duration || 0;\n    if (!isValidNumber(this.duration)) this.duration = 0;\n    if (this.duration) {\n      this.updateMarkerPosition(0);\n      this.chapters.forEach((c) => c.updateFlex(this.duration));\n      this.updateCurrentHeatMap();\n    }\n  }\n\n  updateConfig(config?: Partial<ProgressConfig>) {\n    if (!config) return;\n    Object.assign(this.config, config);\n    this.live = this.config.live!;\n    if (config.duration) this.duration = config.duration;\n    if (config.dot) this.updateDot();\n    if (config.chapters) this.updateChapters(config.chapters);\n    if (config.markers) this.updateMarkers();\n    if (config.heatMap) this.updateHeatMap(config.heatMap);\n    if (config.thumbnail != null) this.thumbnail.updateOptions(config.thumbnail);\n    if (this.live) this.updatePlayed(this.duration);\n    if (config.rotate != null) this.rotate = config.rotate;\n    this.updateSize();\n  }\n\n  updateMarkerPosition(relativeTime: number) {\n    this.markers.forEach((m) => {\n      m.time += relativeTime;\n      m.update(this.duration);\n    });\n  }\n\n  updatePlayed(time: number, isDrag?: boolean) {\n    if ((this.dragging && !isDrag) || !this.duration) return;\n    this.chapters.forEach((c, i) => {\n      if (c.updatePlayed(time)) this.curChapter = i;\n    });\n\n    this.dotEl.style.left = `${time / this.duration * 100}%`;\n  }\n\n  updateBuffer(time: number) {\n    this.chapters.forEach((c) => c.updateBuffer(time));\n  }\n\n  updateHover(time: number, left?: number) {\n    let matched = false;\n    const gt1 = this.chapters.length > 1;\n    this.chapters.forEach((c, i) => {\n      if (c.updateHover(time) && !isTouch && gt1) {\n        const h = this.headMaps[i];\n        if (h) {\n          if (this.prevActiveHeat) this.prevActiveHeat.style.transform = '';\n          h.el.style.transform = 'translateY(-2px)';\n          this.prevActiveHeat = h.el;\n        }\n        if (this.prevActiveChapter) this.prevActiveChapter.style.transform = '';\n        c.realEl.style.transform = 'scaleY(2.5)';\n        this.prevActiveChapter = c.realEl;\n        if (this.curChapter === i) {\n          this.dotEl.style.transform = 'scale(1.2) translateY(-50%)';\n          matched = true;\n        }\n      }\n    });\n    if (!isTouch && gt1 && !matched) this.dotEl.style.transform = 'translateY(-50%)';\n    if (left == null) left = time / this.duration * this.getWidth();\n    this.thumbnail.update(time, left, this.getWidth());\n  }\n\n  private updateDot() {\n    const { dot } = this.config;\n    this.dotEl.innerHTML = '';\n    if (dot && dot !== true) {\n      if (isString(dot)) {\n        this.dotEl.innerHTML = dot;\n      } else {\n        this.dotEl.appendChild(dot);\n      }\n    } else {\n      this.dotEl.appendChild($('.ppbar_dot_i'));\n    }\n  }\n\n  private updateChapters(chapters: RequiredConfig['chapters']) {\n    const cLen = this.chapters.length;\n    const duration = this.duration;\n    if (chapters.length) {\n      const maxLen = Math.max(chapters.length, cLen);\n      let prev = 0;\n      let old;\n      let cur;\n      for (let i = 0; i < maxLen; i++) {\n        old = this.chapters[i];\n        cur = chapters[i];\n        if (old && cur) {\n          old.update(prev, cur.time || duration, duration, cur.title);\n        } else if (old) {\n          old.destroy();\n          this.chapters[i] = undefined as any;\n        } else {\n          this.chapters[i] = new Chapter(this.chapterEl, duration, prev, cur.time || duration, cur.title);\n        }\n        if (cur) prev = cur.time || duration;\n      }\n    } else {\n      const c = this.chapters[0];\n      c.update(0, duration, duration);\n      for (let i = 1; i < cLen; i++) {\n        this.chapters[i].destroy();\n        this.chapters[i] = undefined as any;\n      }\n    }\n\n    this.chapters = this.chapters.filter(Boolean);\n  }\n\n  private updateMarkers() {\n    this.markers.forEach((m) => m.destroy());\n    this.markers = [];\n    this.setMarkers();\n  }\n\n  private updateHoverClass() {\n    const { heatMap } = this.config;\n    if (heatMap) toggleClass(this.heatEl, 'ppbar_heat-hover', !!heatMap.hoverShow);\n  }\n\n  private updateHeatMap(heatMap: RequiredConfig['heatMap']) {\n    this.updateHoverClass();\n    const points = heatMap.points;\n    if (!points || !points.length) {\n      this.headMaps.forEach((x) => x.destroy());\n      this.headMaps = [];\n      return;\n    }\n\n    const ret = this.getHeatItems();\n    if (ret) {\n      const l = Math.max(this.headMaps.length, ret.items.length);\n      let old;\n      let cur;\n      for (let i = 0; i < l; i++) {\n        old = this.headMaps[i];\n        cur = ret.items[i];\n        if (old && cur) {\n          old.update(cur, ret.max, ret.flexes[i]);\n        } else if (old) {\n          old.destroy();\n          this.headMaps[i] = undefined as any;\n        } else {\n          this.headMaps[i] = new HeatMap(this.heatEl, cur, ret.max, ret.flexes[i]);\n        }\n      }\n    } else {\n      const l = Math.max(this.chapters.length, this.headMaps.length);\n      for (let i = 0; i < l; i++) {\n        if (!this.chapters[i]) {\n          this.headMaps[i].destroy();\n          this.headMaps[i] = undefined as any;\n        } else if (!this.headMaps[i]) {\n          this.headMaps[i] = new HeatMap(this.heatEl);\n        }\n      }\n    }\n  }\n\n  private updateCurrentHeatMap() {\n    if (this.headMaps.length < 2) return;\n    const ret = this.getHeatItems();\n    if (ret) {\n      ret.items.forEach((x, i) => {\n        this.headMaps[i]?.update(x, ret.max, ret.flexes[i]);\n      });\n    }\n  }\n\n  private setChapters() {\n    let duration = this.duration;\n    const chapters = this.config.chapters;\n\n    if (chapters && chapters.length) {\n      duration = chapters[chapters.length - 1].time || duration;\n      if (!duration) return;\n      const frag = document.createDocumentFragment();\n\n      let prev = 0;\n      chapters.forEach((c, i) => {\n        this.chapters[i] = new Chapter(frag, duration, prev, c.time || duration, c.title);\n        prev = c.time || 0;\n      });\n\n      this.chapterEl.appendChild(frag);\n    } else {\n      this.chapters[0] = new Chapter(this.chapterEl, duration, 0, duration);\n    }\n  }\n\n  private setMarkers() {\n    const makers = this.config.markers;\n    if (makers && makers.length) {\n      makers.forEach((m, i) => {\n        this.markers[i] = new Marker(this, this.markerEl, m);\n      });\n    }\n  }\n\n  private setHeatMaps() {\n    const heatMap = this.config.heatMap;\n    if (!heatMap) return;\n    const pointLen = heatMap.points?.length;\n    if (!pointLen || pointLen < 2) return;\n    const duration = this.duration;\n\n    if (!duration) {\n      this.chapters.forEach((_, i) => {\n        this.headMaps[i] = new HeatMap(this.heatEl);\n      });\n      return;\n    }\n\n    const ret = this.getHeatItems();\n    if (ret) {\n      ret.items.forEach((x, i) => {\n        this.headMaps[i] = new HeatMap(this.heatEl, x, ret.max, ret.flexes[i]);\n      });\n    }\n  }\n\n  private getHeatItems() {\n    const duration = this.duration;\n    const heatMap = this.config.heatMap;\n    if (!duration || !heatMap) return;\n    const points = heatMap.points as {score: number; duration: number}[];\n    const pointLen = points.length;\n    if (!pointLen || pointLen < 2) return;\n    const defaultDuration = heatMap?.defaultDuration as number;\n    const chapters = this.chapters;\n    const hasChapter = chapters.length > 1;\n    const items: number[][][] = [[]];\n\n    let curChapter = 0;\n    let curItem;\n    let point;\n    let rDur;\n    let max = 0;\n    let total = 0;\n    let curDuration = 0;\n    let curLen = 0;\n    let totalX = 0;\n    let x = 0;\n    let end;\n    for (let i = 0; i < pointLen; i++) {\n      point = points[i];\n      if (isNumber(point)) {\n        point = points[i] = { score: point, duration: defaultDuration };\n      } else {\n        point.duration = point.duration || defaultDuration;\n      }\n      if ((points[i] as any).duration == null) {\n        // eslint-disable-next-line no-console\n        console.error(`ppbar heatMap.points[${i}].duration is undefined`);\n        return;\n      }\n      if (points[i].score > max) max = points[i].score;\n\n      curDuration = hasChapter ? chapters[curChapter].duration : duration;\n\n      curLen = point.duration / curDuration * 1000;\n      x = totalX + curLen / 2;\n      totalX += curLen;\n\n      if (hasChapter) {\n        total += point.duration;\n        curItem = items[curChapter];\n        end = chapters[curChapter].end;\n        if (total > end) {\n          if (chapters[curChapter + 1]) {\n            rDur = total - end;\n            curItem.push([1000, point.score]);\n            items[++curChapter] = [[0, point.score]];\n            totalX = rDur / chapters[curChapter].duration * 1000;\n          } else {\n            curItem.push([1000, point.score]);\n          }\n        } else {\n          curItem.push([x, point.score]);\n        }\n      } else {\n        items[0].push([x, point.score]);\n      }\n    }\n\n    return {\n      items,\n      flexes: items.map((_, i) => (hasChapter ? chapters[i].el.style.flex : undefined)),\n      max,\n    };\n  }\n\n  private onMousemove(ev: MouseEvent) {\n    const l = this.getLeft(ev);\n    const t = this.getCurrentTime(l);\n    this.updateHover(t, l);\n    this.emit(EVENT.MOUSEMOVE, t);\n  }\n\n  private onMouseleave = () => {\n    this.emit(EVENT.MOUSELEAVE);\n    setTimeout(() => {\n      if (this.prevActiveChapter) {\n        this.prevActiveChapter.style.transform = '';\n        this.prevActiveChapter = undefined;\n      }\n      if (this.prevActiveHeat) {\n        this.prevActiveHeat.style.transform = '';\n        this.prevActiveHeat = undefined;\n      }\n    });\n  };\n\n  private onDragStart = (ev: MouseEvent) => {\n    this.dragging = true;\n    this.updateSize();\n    if (isTouch) this.thumbnail.el.style.display = 'block';\n    this.onDragging(ev);\n  };\n\n  private onDragging = (ev: MouseEvent) => {\n    const l = this.getLeft(ev);\n    const t = this.getCurrentTime(l);\n    this.updatePlayed(t, true);\n    this.updateHover(t, l);\n    this.emit(EVENT.DRAGGING, t);\n  };\n\n  private getCurrentTime(left: number): number {\n    return clamp((left / this.getWidth())) * this.duration;\n  }\n\n  private getLeft(ev: MouseEvent) {\n    if (!this.rotate) return ev.clientX - this.rect.x;\n    if (this.rotate === 90) return ev.clientY - this.rect.y;\n    return this.rect.bottom - ev.clientY;\n  }\n\n  private getWidth() {\n    if (this.rotate) return this.rect.height;\n    return this.rect.width;\n  }\n}\n\nexport function createBar(container?: HTMLElement | DocumentFragment, config?: ProgressConfig) {\n  return new ProgressBar(container, config);\n}\n","export default \"__VITE_ASSET__5e10f6e3__\"","export default \"__VITE_ASSET__df4d84ec__\"","export default \"__VITE_ASSET__3c59fef5__\"","import ProgressBar from '../src'\nimport m1 from './m1.png'\nimport m2 from './m2.png'\nimport m3 from './m3.png'\nimport t1 from './t1.jpg'\nimport t2 from './t2.jpg'\nimport t3 from './t3.jpg'\n\nconst p = document.getElementById('c')\nconst buffer = document.getElementById('buffer')\nconst rotate = document.getElementById('rotate')\nconst live = document.getElementById('live')\nconst youtube = document.getElementById('youtube')\nconst bilibili = document.getElementById('bilibili')\n\nconst cfg = {\n  dot: true,\n  duration: 600,\n  live: false,\n  chapters: [\n    { time: 100, title: 'chapter-a' },\n    { time: 280, title: 'chapter-b' },\n    { time: 510, title: 'chapter-c' },\n    { title: 'chapter-d' },\n  ],\n  markers: [{\n    time: 150,\n    title: 'title1',\n    image: m1,\n    size: [32, 34],\n  }, {\n    time: 300,\n    title: 'title2',\n    image: m2,\n    size: [32, 34],\n  },\n  {\n    time: 550, title: 'title3', image: m3, size: [32, 34],\n  }],\n  heatMap: {\n    points: getHeatPoints(),\n    defaultDuration: 7.5\n  },\n  thumbnail: {\n    images: [t1,t2,t3]\n  }\n}\nconst ytbCfg = {\n  dot: true,\n  chapters: [\n    { time: 100, title: 'chapter-a' },\n    { time: 280, title: 'chapter-b' },\n    { time: 510, title: 'chapter-c' },\n    { title: 'chapter-d' },\n  ],\n  markers: [],\n  heatMap: {\n    points: getHeatPoints(),\n    hoverShow: true,\n    defaultDuration: 7.5\n  }\n}\nconst bCfg = {\n  dot: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" width=\"18\" height=\"18\" preserveAspectRatio=\"xMidYMid meet\"><defs><clipPath id=\"__lottie_element_25\"><rect width=\"18\" height=\"18\" x=\"0\" y=\"0\"></rect></clipPath></defs><g clip-path=\"url(#__lottie_element_25)\"><g transform=\"matrix(1,0,0,1,8.937000274658203,8.25)\" opacity=\"0.14\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,0.07500000298023224,1.2130000591278076)\"><path fill=\"rgb(251,114,153)\" fill-opacity=\"1\" d=\" M9,-3.5 C9,-3.5 9,3.5 9,3.5 C9,5.707600116729736 7.207600116729736,7.5 5,7.5 C5,7.5 -5,7.5 -5,7.5 C-7.207600116729736,7.5 -9,5.707600116729736 -9,3.5 C-9,3.5 -9,-3.5 -9,-3.5 C-9,-5.707600116729736 -7.207600116729736,-7.5 -5,-7.5 C-5,-7.5 5,-7.5 5,-7.5 C7.207600116729736,-7.5 9,-5.707600116729736 9,-3.5z\"></path></g></g><g transform=\"matrix(1,0,0,1,9.140999794006348,8.67199993133545)\" opacity=\"0.28\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,-0.1509999930858612,0.7990000247955322)\"><path fill=\"rgb(251,114,153)\" fill-opacity=\"1\" d=\" M8,-3 C8,-3 8,3 8,3 C8,4.931650161743164 6.431650161743164,6.5 4.5,6.5 C4.5,6.5 -4.5,6.5 -4.5,6.5 C-6.431650161743164,6.5 -8,4.931650161743164 -8,3 C-8,3 -8,-3 -8,-3 C-8,-4.931650161743164 -6.431650161743164,-6.5 -4.5,-6.5 C-4.5,-6.5 4.5,-6.5 4.5,-6.5 C6.431650161743164,-6.5 8,-4.931650161743164 8,-3z\"></path></g></g><g transform=\"matrix(0.9883429408073425,-0.7275781631469727,0.6775955557823181,0.920446515083313,7.3224687576293945,-0.7606706619262695)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(0.9937776327133179,-0.11138220876455307,0.11138220876455307,0.9937776327133179,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z\"></path></g></g><g transform=\"matrix(1.1436611413955688,0.7535901665687561,-0.6317168474197388,0.9587040543556213,16.0070743560791,2.902894973754883)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(0.992861807346344,0.1192704513669014,-0.1192704513669014,0.992861807346344,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z\"></path></g></g><g transform=\"matrix(1,0,0,1,8.890999794006348,8.406000137329102)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,0.09099999815225601,1.1009999513626099)\"><path fill=\"rgb(255,255,255)\" fill-opacity=\"1\" d=\" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z\"></path><path stroke-linecap=\"butt\" stroke-linejoin=\"miter\" fill-opacity=\"0\" stroke-miterlimit=\"4\" stroke=\"rgb(0,0,0)\" stroke-opacity=\"1\" stroke-width=\"1.5\" d=\" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z\"></path></g></g><g transform=\"matrix(1,0,0,1,8.89900016784668,8.083999633789062)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.875,-1.125 C0.875,-1.125 0.875,1.125 0.875,1.125 C0.875,1.607912540435791 0.48291251063346863,2 0,2 C0,2 0,2 0,2 C-0.48291251063346863,2 -0.875,1.607912540435791 -0.875,1.125 C-0.875,1.125 -0.875,-1.125 -0.875,-1.125 C-0.875,-1.607912540435791 -0.48291251063346863,-2 0,-2 C0,-2 0,-2 0,-2 C0.48291251063346863,-2 0.875,-1.607912540435791 0.875,-1.125z\"></path></g></g><g transform=\"matrix(1,0,0,1,14.008999824523926,8.083999633789062)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.8999999761581421,-1.100000023841858 C0.8999999761581421,-1.100000023841858 0.8999999761581421,1.100000023841858 0.8999999761581421,1.100000023841858 C0.8999999761581421,1.596709966659546 0.4967099726200104,2 0,2 C0,2 0,2 0,2 C-0.4967099726200104,2 -0.8999999761581421,1.596709966659546 -0.8999999761581421,1.100000023841858 C-0.8999999761581421,1.100000023841858 -0.8999999761581421,-1.100000023841858 -0.8999999761581421,-1.100000023841858 C-0.8999999761581421,-1.596709966659546 -0.4967099726200104,-2 0,-2 C0,-2 0,-2 0,-2 C0.4967099726200104,-2 0.8999999761581421,-1.596709966659546 0.8999999761581421,-1.100000023841858z\"></path></g></g></g></svg>`,\n  chapters: [],\n  markers: [{\n    time: 150,\n    title: 'title1',\n    image: m1,\n    size: [32, 34],\n  }, {\n    time: 300,\n    title: 'title2',\n    image: m2,\n    size: [32, 34],\n  },\n  {\n    time: 550, title: 'title3', image: m3, size: [32, 34],\n  }],\n  heatMap: {\n    points: getHeatPoints(),\n    defaultDuration: 7.5\n  }\n}\n\n\nconst pb = new ProgressBar(p, cfg)\n\npb.updateBuffer(6 * buffer.value)\nbuffer.onchange = function() {\n  pb.updateBuffer(6 * buffer.value)\n}\n\npb.on('markerClick', function (m) {\n  pb.updatePlayed(m.time)\n})\n\nrotate.onchange = function() {\n  const v = rotate.value ? Number(rotate.value) : 0\n  if (v === 90) {\n    pb.updateRotate(90)\n    p.style.width = '300px'\n    p.style.transform = 'rotate(90deg)'\n  } else if (v === -90) {\n    pb.updateRotate(-90)\n    p.style.width = '300px'\n    p.style.transform = 'rotate(-90deg)'\n  } else {\n    pb.updateRotate(0)\n    p.style.width = ''\n    p.style.transform = ''\n  }\n}\n\nlive.onchange = function() {\n  pb.updateConfig({\n    live: !!live.checked\n  })\n}\n\nyoutube.onchange = function() {\n  if (youtube.checked) {\n    if (bilibili.checked) bilibili.checked = false\n    pb.updateConfig(ytbCfg)\n  } else {\n    pb.updateConfig(cfg)\n  }\n  pb.el.style.setProperty('--primary-color', '#f00');\n  pb.updatePlayed(0)\n  pb.updateBuffer(6 * buffer.value)\n}\n\nbilibili.onchange = function() {\n  if (bilibili.checked) {\n    if (youtube.checked) youtube.checked = false\n    pb.updateConfig(bCfg)\n    pb.el.style.setProperty('--primary-color', 'rgba(35,173,229, 1)');\n\n  } else {\n    pb.updateConfig(cfg)\n    pb.el.style.setProperty('--primary-color', '#f00');\n  }\n  pb.updatePlayed(0)\n  pb.updateBuffer(6 * buffer.value)\n}\n\nfunction getHeatPoints() {\n  return [\n    9592,\n    9692,\n    10063,\n    41138,\n    30485,\n    23905,\n    10966.5,\n    10316.5,\n    8533.5,\n    7249,\n    7181,\n    6813,\n    5929,\n    18046.5,\n    8817,\n    3684.5,\n    4863.5,\n    7818,\n    11122,\n    11977.5,\n    12045.5,\n    6882,\n    8616,\n    3389.5,\n    2791.5,\n    2378,\n    2415,\n    3561.5,\n    4563.5,\n    5351,\n    5166,\n    3649.5,\n    3817.5,\n    6808,\n    3503,\n    2831.5,\n    2617.5,\n    2401,\n    2149,\n    2478.5,\n    2498.5,\n    2311.5,\n    1843.5,\n    1800,\n    2101,\n    2002.5,\n    2882.5,\n    3380,\n    3880,\n    3966,\n    3257,\n    8804,\n    5440,\n    6468,\n    6432,\n    3885,\n    3611,\n    7348,\n    11954,\n    12317,\n    5834,\n    1549.5,\n    1658.5,\n    1649,\n    2053,\n    3831.5,\n    6050.5,\n    7764,\n    8290,\n    8549,\n    5757,\n    1898,\n    1393,\n    1263.5,\n    1356.5,\n    2841,\n    5774,\n    4294,\n    1798,\n    1260.5,\n  ];\n}\n","export default \"__VITE_ASSET__3b083484__\"","export default \"__VITE_ASSET__b7afa5ab__\"","export default \"__VITE_ASSET__4b7b4485__\""],"names":["EVENT","isTouch","isBrowser","window","navigator","maxTouchPoints","toString","Object","prototype","isString","o","String","isFunction","call","thirdOptsSupported","options","defineProperty","get","addEventListener","e","node","type","handler","_classCallCheck","this","DomListener","_defineProperty","removeEventListener","destroyableMap","Map","addDestroyable","key","destroyable","has","set","push","_destroy","forEach","item","destroy","delete","addDestroyableListener","el","listener","domListener","$","desc","attrs","children","classPrefix","arguments","length","undefined","match","SELECTOR_REGEX","exec","document","createElement","id","className","replace","concat","trim","keys","name","value","test","setAttribute","innerHTML","c","appendChild","removeNode","remove","parentNode","removeChild","svgNS","EE","_createClass","fn","context","once","create","evt","a1","_this","setTimeout","emit","time","_events","listeners","off","i","TypeError","_eventsCount","bind","event","on","clearEvent","events","_this2","Rect","rect","getBoundingClientRect","tryUpdate","width","height","left","top","bottom","right","newRect","ret","v","update","getEl","container","_this3","EventEmitterComponent","_assertThisInitialized","_super","EventEmitter","dom","start","move","end","_this4","Drag","ev","preventDefault","setPointerCapture","pointerId","moveHandler","lastEv","pending","requestAnimationFrame","handlerMove","releasePointerCapture","error","downHandler","upHandler","padStart","len","str","l","n","upper","Math","max","min","lower","throttle","ctx","first","args","apply","duration","title","_this5","realEl","bufferedEl","wrapEl","hoverEl","playedEl","Component","updateFlex","style","flex","setBar","transform","HeatMap","dots","_this6","svg","createElementNS","pathEl","defs","clipPath","heatId","dx2","_this7","prev","dx1","d","cur","next","getXY","slope","dy2","m","path","toFixed","dy1","setAttributeNS","join","a","b","Marker","prog","cfg","_this8","tipEl","textContent","image","_cfg$size","_cfg$size2","img","Image","size","src","_Component4","_inherits","Thumbnail","_super5","_createSuper","_this9","opts","gap","col","row","images","imgEl","titleEl","timeEl","updateOptions","config","thumbnail","opacity","assign","display","thumbImgPrePic","ssGapRatio","x","maxX","getCurrentThumb","thumb","backgroundImage","url","backgroundPosition","y","live","seconds","isFinite","isNaN","isNeg","round","formatTime","markers","chapters","_this$prog","_i","half","clamp","_this10","rotate","headMaps","curChapter","dragging","onMouseleave","prevActiveChapter","prevActiveHeat","onDragStart","updateSize","onDragging","getLeft","t","getCurrentTime","updatePlayed","updateHover","_this10$config","updateDuration","heatEl","chapterEl","markerEl","dotEl","updateDot","updateHoverClass","onMousemove","setChapters","setMarkers","setHeatMaps","ResizeObserver","ro","observe","disconnect","r","_this11","_this12","isNumber","updateMarkerPosition","updateCurrentHeatMap","dot","updateChapters","updateMarkers","heatMap","updateHeatMap","relativeTime","_this13","isDrag","_this14","updateBuffer","_this15","matched","gt1","h","getWidth","old","maxLen","cLen","Chapter","filter","Boolean","cls","force","classList","add","toggle","toggleClass","hoverShow","points","getHeatItems","items","flexes","_l2","_i3","_this16","_this16$headMaps$i","_this17","frag","createDocumentFragment","_this18","makers","_heatMap$points","_this19","pointLen","_","curItem","point","rDur","defaultDuration","hasChapter","total","curDuration","score","console","totalX","curLen","map","clientY","clientX","m1","m2","p","getElementById","buffer","youtube","bilibili","m3","ytbCfg","pb","ProgressBar","onchange","Number","updateRotate","updateConfig","checked","setProperty","bCfg"],"mappings":"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,SAASwS,eAAe,QAC/BE,EAAU1S,SAASwS,eAAe,WAC1BG,EAAG3S,SAASwS,eAAe,YAEnC1J,GAAM,CACV4F,KAAK,EACLvI,SAAU,IACVoF,MAAM,EACNQ,SAAU,CACR,CAAEhK,KAAM,IAAKqE,MAAO,aACpB,CAAErE,KAAM,IAAKqE,MAAO,aACpB,CAAErE,KAAM,IAAKqE,MAAO,aACpB,CAAEA,MAAO,cAEX0F,QAAS,CAAC,CACR/J,KAAM,IACNqE,MAAO,SACP8C,MAAOmJ,EACP9I,KAAM,CAAC,GAAI,KACV,CACDxH,KAAM,IACNqE,MAAO,SACP8C,MAAOoJ,EACP/I,KAAM,CAAC,GAAI,KAEb,CACExH,KAAM,IAAKqE,MAAO,SAAU8C,MAAO0J,EAAIrJ,KAAM,CAAC,GAAI,MAEpDsF,QAAS,CACPyB,OA2GK,CACL,KACA,KACA,MACA,MACA,MACA,MACA,QACA,QACA,OACA,KACA,KACA,KACA,KACA,QACA,KACA,OACA,OACA,KACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,QA1LAoB,gBAAiB,KAEnBjH,UAAW,CACTN,OAAQ,CC5CG,2BCAA,2BCAA,8BH+CH0I,GAAG,CACbnE,KAAK,EACL3C,SAAU,CACR,CAAEhK,KAAM,IAAKqE,MAAO,aACpB,CAAErE,KAAM,IAAKqE,MAAO,aACpB,CAAErE,KAAM,IAAKqE,MAAO,aACpB,CAAEA,MAAO,cAEX0F,QAAS,GACT+C,QAAS,CACPyB,OA0FK,CACL,KACA,KACA,MACA,MACA,MACA,MACA,QACA,QACA,OACA,KACA,KACA,KACA,KACA,QACA,KACA,OACA,OACA,KACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,QAzKAD,WAAW,EACXqB,gBAAiB,SAGR,CACXhD,IAAG,yrKACH3C,SAAU,GACVD,QAAS,CAAC,CACR/J,KAAM,IACNqE,MAAO,SACP8C,MAAOmJ,EACP9I,KAAM,CAAC,GAAI,KACV,CACDxH,KAAM,IACNqE,MAAO,SACP8C,MAAOoJ,EACP/I,KAAM,CAAC,GAAI,KAEb,CACExH,KAAM,IAAKqE,MAAO,SAAU8C,MAAO0J,EAAIrJ,KAAM,CAAC,GAAI,MAEpDsF,QAAS,CACPyB,OAmEK,CACL,KACA,KACA,MACA,MACA,MACA,MACA,QACA,QACA,OACA,KACA,KACA,KACA,KACA,QACA,KACA,OACA,OACA,KACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,QAlJAoB,gBAAiB,MAKfoB,GAAK,IAAIC,EAAYR,EAAGzJ,IAE9BgK,GAAG3D,aAAa,EAAIsD,EAAOhS,OAC3BgS,EAAOO,SAAW,WAChBF,GAAG3D,aAAa,EAAIsD,EAAOhS,QAG7BqS,GAAGtQ,GAAG,eAAe,SAAU4F,GAC7B0K,GAAG5F,aAAa9E,EAAErG,SAGpBsK,EAAO2G,SAAW,WAChB,MAAU3G,EAAO5L,MAAQwS,OAAO5G,EAAO5L,OAAS,EACtC,KAAN+C,GACFsP,GAAGI,aAAa,IAChBX,EAAE1L,MAAM7D,MAAQ,QAChBuP,EAAE1L,MAAMG,UAAY,kBACJ,KAAPxD,GACTsP,GAAGI,cAAc,IACjBX,EAAE1L,MAAM7D,MAAQ,QAChBuP,EAAE1L,MAAMG,UAAY,mBAEpB8L,GAAGI,aAAa,GAChBX,EAAE1L,MAAM7D,MAAQ,GAChBuP,EAAE1L,MAAMG,UAAY,KAIxBuE,EAAKyH,SAAW,WACdF,GAAGK,aAAa,CACd5H,OAAQA,EAAK6H,WAIjBV,EAAQM,SAAW,WACbN,EAAQU,SACNT,EAASS,UAAST,EAASS,SAAU,GACzCN,GAAGK,aAAaN,KAEhBC,GAAGK,aAAarK,IAElBgK,GAAG5T,GAAG2H,MAAMwM,YAAY,kBAAmB,QAC3CP,GAAG5F,aAAa,GAChB4F,GAAG3D,aAAa,EAAIsD,EAAOhS,QAG7BkS,EAASK,SAAW,WACdL,EAASS,SACPV,EAAQU,UAASV,EAAQU,SAAU,GACvCN,GAAGK,aAAaG,IAChBR,GAAG5T,GAAG2H,MAAMwM,YAAY,kBAAmB,yBAG3CP,GAAGK,aAAarK,IAChBgK,GAAG5T,GAAG2H,MAAMwM,YAAY,kBAAmB,SAE7CP,GAAG5F,aAAa,GAChB4F,GAAG3D,aAAa,EAAIsD,EAAOhS"}