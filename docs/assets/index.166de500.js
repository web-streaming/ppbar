export function __vite_legacy_guard(){import("data:text/javascript,")}!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerpolicy&&(e.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?e.credentials="include":"anonymous"===t.crossorigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const t="markerClick",e="dragging",i="dragend",s="mousemove",r="mouseleave",a="undefined"!=typeof window,h=a&&("ontouchstart"in window||navigator.maxTouchPoints>0),n=h&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&/Version\/1[0-4]/.test(navigator.userAgent),o=Object.prototype.toString;function l(t){return"string"==typeof t||t instanceof String}function d(t){return"number"==typeof t||"[object Number]"===o.call(t)}let p=!1;if(a)try{const q=Object.defineProperty({},"once",{get(){p=!0}});window.addEventListener("test",null,q)}catch(V){}class c{constructor(t,e,i,s){var r;this.node=t,this.type=e,this.handler=i,this.options=s,this.options=!0===(r=s)||!1===r||"[object Boolean]"===o.call(r)?s:!!s&&(p&&s),t.addEventListener(e,i,this.options)}destroy(){this.node&&(this.node.removeEventListener(this.type,this.handler,this.options),this.node=null)}}const u=new Map;function g(t,e){return u.has(t)||u.set(t,[]),u.get(t).push(e),e}function f(t){u.has(t)&&(u.get(t).forEach((t=>t.destroy())),u.delete(t))}function m(t,e,i,s,r){const a=new c(e,i,s,r);return t&&g(t,a),a}const A=/([\w-]+)?(?:#([\w-]+))?((?:\.(?:[\w-]+))*)/;function C(t,e,i,s=""){let r=[];t&&(r=A.exec(t)||[]);const a=document.createElement(r[1]||"div");return r[2]&&(a.id=r[3]),r[3]&&(a.className=r[3].replace(/\./g,` ${s}`).trim()),e&&Object.keys(e).forEach((t=>{const i=e[t];void 0!==i&&("selected"===t?i&&a.setAttribute(t,"true"):a.setAttribute(t,i))})),i&&(l(i)?a.innerHTML=i:i.forEach((t=>a.appendChild(t)))),a}function v(t){t&&(t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t))}const E="http://www.w3.org/2000/svg";class y{constructor(t,e,i){this.fn=t,this.context=e,this.once=i,this.once=i||!1}}class w{constructor(t){this.el=t,this.update=()=>{this.rect=this.el.getBoundingClientRect()},this.rect={}}get width(){return this.tryUpdate(this.rect.width),this.rect.width}get height(){return this.tryUpdate(this.rect.height),this.rect.height}get x(){return this.tryUpdate(this.rect.left),this.rect.left}get y(){return this.tryUpdate(this.rect.top),this.rect.top}get bottom(){return this.rect.bottom}get right(){return this.rect.right}get changed(){const t=this.el.getBoundingClientRect(),e=t.top!==this.rect.top||t.left!==this.rect.left||t.width!==this.rect.width||t.height!==this.rect.height;return e&&(this.rect=t),e}tryUpdate(t){t||this.update()}destroy(){this.el=null,this.rect=null}}function B(t,e,i,s,r){let a;return a=e&&!l(e)?e:C(e,i,s,r),t&&t.appendChild(a),a}class b{constructor(t,e,i,s,r){this.el=B(t,e,i,s,r)}destroy(){v(this.el),f(this)}}function x(t){const e=t.changedTouches[0]||{};return{clientX:e.clientX||0,clientY:e.clientY||0}}class M{constructor(t,e,i,s){this.el=t,this.start=e,this.move=i,this.end=s,this.pending=!1,this.downHandler=t=>{this.el.setPointerCapture(t.pointerId),this.el.addEventListener("pointermove",this.moveHandler,!0),this.el.addEventListener("pointerup",this.upHandler,!0),this.el.addEventListener("pointercancel",this.upHandler,!0),this.start(t)},this.touchDownHandler=t=>{t.preventDefault(),this.start(x(t))},this.moveHandler=t=>{this.lastEv=t,this.pending||(this.pending=!0,this.rafId=requestAnimationFrame(this.handlerMove))},this.handlerMove=()=>{this.move(this.lastEv),this.pending=!1},this.touchMoveHandler=t=>{this.lastEv=t,this.pending||(this.pending=!0,this.rafId=requestAnimationFrame(this.handlerTouchMove))},this.handlerTouchMove=()=>{this.move(x(this.lastEv)),this.pending=!1},this.upHandler=t=>{this.removePointerEvents(),this.pending=!1,this.end&&(cancelAnimationFrame(this.rafId),this.end(t))},this.touchUpHandler=t=>{this.pending=!1,this.end&&(cancelAnimationFrame(this.rafId),this.end(x(t)))},this.el=t,this.start=e,this.move=i,this.end=s,n?(t.addEventListener("touchstart",this.touchDownHandler,!0),t.addEventListener("touchmove",this.touchMoveHandler,!0),t.addEventListener("touchend",this.touchUpHandler,!0),t.addEventListener("touchcancel",this.touchUpHandler,!0)):t.addEventListener("pointerdown",this.downHandler,!0)}removePointerEvents(){this.el.removeEventListener("pointermove",this.moveHandler,!0),this.el.removeEventListener("pointerup",this.upHandler,!0),this.el.removeEventListener("pointercancel",this.upHandler,!0)}destroy(){this.el&&(this.el.removeEventListener("touchstart",this.touchDownHandler,!0),this.el.removeEventListener("touchmove",this.touchMoveHandler,!0),this.el.removeEventListener("touchend",this.touchUpHandler,!0),this.el.removeEventListener("touchcancel",this.touchUpHandler,!0),this.el.removeEventListener("pointerdown",this.downHandler,!0),this.removePointerEvents(),this.el=null)}}function Q(t,e=2,i="0"){if((t=String(t)).padStart)return t.padStart(e,i);if(t.length>=e)return t;for(let s=0,r=e-t.length;s<r;s++)t=i+t;return t}function k(t,e=0,i=1){return Math.max(Math.min(t,i),e)}function D(t,e){let i=!1,s=!0,r=null;return function(){if(r=arguments,s)return s=!1,t.apply(e,r);i||(i=!0,requestAnimationFrame((()=>{t.apply(e,r),i=!1})))}}class Y extends b{constructor(t,e,i,s,r){super(t,".ppbar_chapter_i"),this.start=i,this.end=s,this.title=r,this.duration=0;const a=this.realEl=this.el.appendChild(C(".ppbar_chapter_i_w"));this.bufferedEl=a.appendChild(C(".ppbar_chapter_i_b")),this.hoverEl=a.appendChild(C(".ppbar_chapter_i_h")),this.playedEl=a.appendChild(C(".ppbar_chapter_i_p")),this.update(i,s,e,r)}update(t,e,i,s){this.start=t,this.end=e,this.duration=e-t,this.title=s||"",this.updateFlex(i)}updateFlex(t){this.end<=this.start&&(this.end=t,this.duration=this.end-this.start),this.el.style.flex=String(Math.max(0,this.duration/t))}match(t){return t>=this.start&&t<=this.end}updateHover(t){return this.setBar(t,this.hoverEl)}updateBuffer(t){return this.setBar(t,this.bufferedEl)}updatePlayed(t){return this.setBar(t,this.playedEl)}setBar(t,e){const i=this.match(t);return e.style.transform=`scaleX(${i?(t-this.start)/this.duration:t>this.end?1:0})`,i}}let H=0;class I extends b{constructor(t,e,i,s){super(t,".ppbar_heat_i");const r=document.createElementNS(E,"svg");this.pathEl=document.createElementNS(E,"path");const a=document.createElementNS(E,"defs"),h=document.createElementNS(E,"clipPath"),n=document.createElementNS(E,"rect");r.setAttribute("viewBox","0 0 1000 100"),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("width","100%"),h.setAttribute("id",`ppb${H}`),n.setAttribute("clip-path",`url(#ppb${H})`),n.setAttribute("fill","white"),n.setAttribute("fill-opacity","0.2"),n.setAttribute("width","100%"),n.setAttribute("height","100%"),n.setAttribute("x","0"),n.setAttribute("y","0"),h.appendChild(this.pathEl),a.appendChild(h),r.appendChild(a),r.appendChild(n),H++,e&&i&&this.update(e,i,s),this.el.appendChild(r)}update(t,e,i){const s=["M0 100"];let r,a,h,n=[0,100],o=[],l=0,d=0;const p=t=>{if(t)return[t[0],100*(1-t[1]/e)]};t.forEach(((e,i)=>{o=r||p(e),r=p(t[i+1])||[1e3,100];const c=this.slope(n,r);a=-.3*(r[0]-o[0]),h=a*c*.6,s.push(`C ${(n[0]-l).toFixed(1)} ${(n[1]-d).toFixed(1)}, ${(o[0]+a).toFixed(1)} ${(o[1]+h).toFixed(1)}, ${o[0].toFixed(1)} ${o[1].toFixed(1)}`),l=a,d=h,n=o})),s.push(`C ${(o[0]-l).toFixed(1)} ${(o[1]-d).toFixed(1)}, 1000 100, 1000 100`),this.pathEl.setAttributeNS(null,"d",s.join(" ")),this.el.style.flex=i||"1"}slope(t,e){return(e[1]-t[1])/(e[0]-t[0])}}class z extends b{constructor(e,i,s){var r,a;if(super(i,".ppbar_marker_i"),this.cfg=s,this.tipEl=this.el.appendChild(C(".ppbar_marker_i_tip")),s.title&&(this.title=s.title,this.tipEl.textContent=s.title),this.el.appendChild(C(".ppbar_marker_i_d")),s.image){const t=new Image(null==(r=s.size)?void 0:r[0],null==(a=s.size)?void 0:a[1]);t.src=s.image,this.el.appendChild(t)}else s.el&&(s.size&&s.size.length>1&&(s.el.style.width=`${s.size[0]}px`,s.el.style.height=`${s.size[1]}px`),this.el.appendChild(s.el));m(this,this.el,"click",(()=>{e.emit(t,this.cfg)})),this.time=s.time,this.update(e.duration)}update(t){t&&(this.time<0?this.el.style.right=-this.time/t*100+"%":this.el.style.left=this.time/t*100+"%")}}class S extends b{constructor(t,e){super(t,".ppbar_thumb"),this.prog=e,this.opts={start:0,gap:10,col:5,row:5,width:160,height:90,images:[]},this.imgEl=this.el.appendChild(C(".ppbar_thumb_img")),this.titleEl=this.el.appendChild(C(".ppbar_thumb_title")),this.timeEl=this.el.appendChild(C(".ppbar_thumb_time")),this.rect=g(this,new w(this.el)),this.updateOptions(this.prog.config.thumbnail)}updateOptions(t){if(!1===t)return void(this.el.style.opacity="0");this.el.style.opacity="1";const e=Object.assign(this.opts,t);e.images.length?(this.imgEl.style.display="block",this.titleEl.style.width=this.imgEl.style.width=`${e.width}px`,this.imgEl.style.height=`${e.height}px`,this.thumbImgPrePic=e.col*e.row,this.ssGapRatio=e.start/e.gap):this.imgEl.style.display="none",this.rect.update()}update(t,e,i){if(this.opts.images.length){const e=this.getCurrentThumb(t);e&&(this.imgEl.style.backgroundImage=`url(${e.url})`,this.imgEl.style.backgroundPosition=`-${e.x}px -${e.y}px`)}else this.rect.update();const s=this.prog.live;this.timeEl.textContent=`${s?"-":""}${function(t){if(!isFinite(t)||isNaN(t))return"";if(!t)return"0:00";const e=t<0;let i;return e&&(t*=-1),i=(t=Math.round(t))<60?`0:${Q(t)}`:t<3600?`${~~(t/60)}:${Q(t%60)}`:`${~~(t/3600)}:${Q(~~(t%3600/60))}:${Q(t%60)}`,e?`-${i}`:i}(s?this.prog.duration-t:t)}`;const{markers:r,chapters:a}=this.prog;let h;if(r.length)for(let o,l=0,d=r.length;l<d;l++)if(o=r[l],t>=o.time&&t<o.time+2){h=o.title;break}if(!h&&a.length)for(let o,l=0,d=a.length;l<d;l++)if(o=a[l],t>=o.start&&t<=o.end){h=o.title;break}this.titleEl.textContent=h||"";const n=this.rect.width/2;this.el.style.left=`${k(e-n,0,Math.max(0,i-2*n))}px`}getCurrentThumb(t){const e=0|Math.max(t/this.opts.gap-this.ssGapRatio,0),i=this.opts.images[e/this.thumbImgPrePic|0];if(!i)return;return{url:i,x:e%this.opts.col*this.opts.width,y:~~(e%this.thumbImgPrePic/this.opts.row)*this.opts.height}}}var L="data:image/png;base64,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",U="data:image/png;base64,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",N="./assets/m3.6e0b3825.png";const P=document.getElementById("c"),F=document.getElementById("buffer"),R=document.getElementById("rotate"),G=document.getElementById("live"),O=document.getElementById("youtube"),T=document.getElementById("bilibili"),J={dot:!0,duration:600,live:!1,chapters:[{time:100,title:"chapter-a"},{time:280,title:"chapter-b"},{time:510,title:"chapter-c"},{title:"chapter-d"}],markers:[{time:150,title:"title1",image:L,size:[32,34]},{time:300,title:"title2",image:U,size:[32,34]},{time:550,title:"title3",image:N,size:[32,34]}],heatMap:{points:[9592,9692,10063,41138,30485,23905,10966.5,10316.5,8533.5,7249,7181,6813,5929,18046.5,8817,3684.5,4863.5,7818,11122,11977.5,12045.5,6882,8616,3389.5,2791.5,2378,2415,3561.5,4563.5,5351,5166,3649.5,3817.5,6808,3503,2831.5,2617.5,2401,2149,2478.5,2498.5,2311.5,1843.5,1800,2101,2002.5,2882.5,3380,3880,3966,3257,8804,5440,6468,6432,3885,3611,7348,11954,12317,5834,1549.5,1658.5,1649,2053,3831.5,6050.5,7764,8290,8549,5757,1898,1393,1263.5,1356.5,2841,5774,4294,1798,1260.5],defaultDuration:7.5},thumbnail:{images:["./assets/t1.d6a0b49b.jpg","./assets/t2.8693a9df.jpg","./assets/t3.4b7b4485.jpg"]}},j={dot:!0,chapters:[{time:100,title:"chapter-a"},{time:280,title:"chapter-b"},{time:510,title:"chapter-c"},{title:"chapter-d"}],markers:[],heatMap:{points:[9592,9692,10063,41138,30485,23905,10966.5,10316.5,8533.5,7249,7181,6813,5929,18046.5,8817,3684.5,4863.5,7818,11122,11977.5,12045.5,6882,8616,3389.5,2791.5,2378,2415,3561.5,4563.5,5351,5166,3649.5,3817.5,6808,3503,2831.5,2617.5,2401,2149,2478.5,2498.5,2311.5,1843.5,1800,2101,2002.5,2882.5,3380,3880,3966,3257,8804,5440,6468,6432,3885,3611,7348,11954,12317,5834,1549.5,1658.5,1649,2053,3831.5,6050.5,7764,8290,8549,5757,1898,1393,1263.5,1356.5,2841,5774,4294,1798,1260.5],hoverShow:!0,defaultDuration:7.5}},K={dot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" preserveAspectRatio="xMidYMid meet"><defs><clipPath id="__lottie_element_25"><rect width="18" height="18" x="0" y="0"></rect></clipPath></defs><g clip-path="url(#__lottie_element_25)"><g transform="matrix(1,0,0,1,8.937000274658203,8.25)" opacity="0.14" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0.07500000298023224,1.2130000591278076)"><path fill="rgb(251,114,153)" fill-opacity="1" d=" M9,-3.5 C9,-3.5 9,3.5 9,3.5 C9,5.707600116729736 7.207600116729736,7.5 5,7.5 C5,7.5 -5,7.5 -5,7.5 C-7.207600116729736,7.5 -9,5.707600116729736 -9,3.5 C-9,3.5 -9,-3.5 -9,-3.5 C-9,-5.707600116729736 -7.207600116729736,-7.5 -5,-7.5 C-5,-7.5 5,-7.5 5,-7.5 C7.207600116729736,-7.5 9,-5.707600116729736 9,-3.5z"></path></g></g><g transform="matrix(1,0,0,1,9.140999794006348,8.67199993133545)" opacity="0.28" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,-0.1509999930858612,0.7990000247955322)"><path fill="rgb(251,114,153)" fill-opacity="1" d=" M8,-3 C8,-3 8,3 8,3 C8,4.931650161743164 6.431650161743164,6.5 4.5,6.5 C4.5,6.5 -4.5,6.5 -4.5,6.5 C-6.431650161743164,6.5 -8,4.931650161743164 -8,3 C-8,3 -8,-3 -8,-3 C-8,-4.931650161743164 -6.431650161743164,-6.5 -4.5,-6.5 C-4.5,-6.5 4.5,-6.5 4.5,-6.5 C6.431650161743164,-6.5 8,-4.931650161743164 8,-3z"></path></g></g><g transform="matrix(0.9883429408073425,-0.7275781631469727,0.6775955557823181,0.920446515083313,7.3224687576293945,-0.7606706619262695)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(0.9937776327133179,-0.11138220876455307,0.11138220876455307,0.9937776327133179,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z"></path></g></g><g transform="matrix(1.1436611413955688,0.7535901665687561,-0.6317168474197388,0.9587040543556213,16.0070743560791,2.902894973754883)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(0.992861807346344,0.1192704513669014,-0.1192704513669014,0.992861807346344,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z"></path></g></g><g transform="matrix(1,0,0,1,8.890999794006348,8.406000137329102)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0.09099999815225601,1.1009999513626099)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z"></path><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="1.5" d=" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z"></path></g></g><g transform="matrix(1,0,0,1,8.89900016784668,8.083999633789062)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.875,-1.125 C0.875,-1.125 0.875,1.125 0.875,1.125 C0.875,1.607912540435791 0.48291251063346863,2 0,2 C0,2 0,2 0,2 C-0.48291251063346863,2 -0.875,1.607912540435791 -0.875,1.125 C-0.875,1.125 -0.875,-1.125 -0.875,-1.125 C-0.875,-1.607912540435791 -0.48291251063346863,-2 0,-2 C0,-2 0,-2 0,-2 C0.48291251063346863,-2 0.875,-1.607912540435791 0.875,-1.125z"></path></g></g><g transform="matrix(1,0,0,1,14.008999824523926,8.083999633789062)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.8999999761581421,-1.100000023841858 C0.8999999761581421,-1.100000023841858 0.8999999761581421,1.100000023841858 0.8999999761581421,1.100000023841858 C0.8999999761581421,1.596709966659546 0.4967099726200104,2 0,2 C0,2 0,2 0,2 C-0.4967099726200104,2 -0.8999999761581421,1.596709966659546 -0.8999999761581421,1.100000023841858 C-0.8999999761581421,1.100000023841858 -0.8999999761581421,-1.100000023841858 -0.8999999761581421,-1.100000023841858 C-0.8999999761581421,-1.596709966659546 -0.4967099726200104,-2 0,-2 C0,-2 0,-2 0,-2 C0.4967099726200104,-2 0.8999999761581421,-1.596709966659546 0.8999999761581421,-1.100000023841858z"></path></g></g></g></svg>',chapters:[],markers:[{time:150,title:"title1",image:L,size:[32,34]},{time:300,title:"title2",image:U,size:[32,34]},{time:550,title:"title3",image:N,size:[32,34]}],heatMap:{points:[9592,9692,10063,41138,30485,23905,10966.5,10316.5,8533.5,7249,7181,6813,5929,18046.5,8817,3684.5,4863.5,7818,11122,11977.5,12045.5,6882,8616,3389.5,2791.5,2378,2415,3561.5,4563.5,5351,5166,3649.5,3817.5,6808,3503,2831.5,2617.5,2401,2149,2478.5,2498.5,2311.5,1843.5,1800,2101,2002.5,2882.5,3380,3880,3966,3257,8804,5440,6468,6432,3885,3611,7348,11954,12317,5834,1549.5,1658.5,1649,2053,3831.5,6050.5,7764,8290,8549,5757,1898,1393,1263.5,1356.5,2841,5774,4294,1798,1260.5],defaultDuration:7.5}},X=new class extends class extends class{constructor(){this._events=Object.create(null),this._eventsCount=0}emitAsync(t,e,i=0){setTimeout((()=>this.emit(t,e)),i)}emit(t,e){if(!this._events[t])return;const i=this._events[t];if(i.fn)i.once&&this.off(t,i.fn,void 0,!0),i.fn.call(i.context,e);else{const s=i.length;for(let r=0;r<s;r++)i[r].once&&this.off(t,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,e)}}on(t,e,i,s=!1){if("function"!=typeof e)throw new TypeError("The listener must be a function");const r=new y(e,i||this,s);return this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],r]:this._events[t].push(r):(this._events[t]=r,this._eventsCount++),{destroy:this.off.bind(this,t,e)}}once(t,e,i){return this.on(t,e,i,!0)}off(t,e,i,s){if(!t)return this._events=Object.create(null),this._eventsCount=0,this;if(!this._events[t])return this;if(!e)return this.clearEvent(t),this;const r=this._events[t],a=[];if(r.fn)r.fn!==e||s&&!r.once||i&&r.context!==i||this.clearEvent(t);else{for(let t=0,h=r.length;t<h;t++)(r[t].fn!==e||s&&!r[t].once||i&&r[t].context!==i)&&a.push(r[t]);a.length?this._events[t]=1===a.length?a[0]:a:this.clearEvent(t)}return this}clearEvent(t){0==--this._eventsCount?this._events=Object.create(null):delete this._events[t]}}{constructor(t,e,i,s,r){super(),this.el=B(t,e,i,s,r)}destroy(){v(this.el),f(this)}}{constructor(t,s){super(t,".ppbar"),this.duration=0,this.rotate=0,this.live=!1,this.chapters=[],this.markers=[],this.headMaps=[],this.curChapter=0,this.dragging=!1,this.onMouseleave=()=>{this.emit(r),setTimeout((()=>{this.prevActiveChapter&&(this.prevActiveChapter.style.transform="",this.prevActiveChapter=void 0),this.prevActiveHeat&&(this.prevActiveHeat.style.transform="",this.prevActiveHeat=void 0)}))},this.onDragStart=t=>{var e;this.dragging=!0,this.updateSize(),h&&((null==(e=this.config.heatMap)?void 0:e.hoverShow)&&(this.heatEl.style.opacity="1"),this.thumbnail.el.style.display="block"),this.onDragging(t)},this.onDragging=t=>{const i=this.getLeft(t),s=this.getCurrentTime(i);this.updatePlayed(s,!0),this.updateHover(s,i),this.emit(e,s)},this.config=Object.assign({},s);const{duration:a,live:n,rotate:o}=this.config;if(this.rotate=o||0,this.updateDuration(a),this.live=n,this.heatEl=this.el.appendChild(C(".ppbar_heat")),this.chapterEl=this.el.appendChild(C(".ppbar_chapter")),this.markerEl=this.el.appendChild(C(".ppbar_marker")),this.dotEl=this.el.appendChild(C(".ppbar_dot")),this.updateDot(),this.updateHoverClass(),this.rect=g(this,new w(this.el)),g(this,new M(this.chapterEl,this.onDragStart,this.onDragging,(t=>{var e;this.dragging=!1,h&&((null==(e=this.config.heatMap)?void 0:e.hoverShow)&&(this.heatEl.style.opacity="0"),this.thumbnail.el.style.display="none"),this.emit(i,this.getCurrentTime(this.getLeft(t)))}))),m(this,this.el,"mousemove",D((t=>this.onMousemove(t))),!0),m(this,this.el,"mouseleave",D(this.onMouseleave),!1),this.setChapters(),this.setMarkers(),this.setHeatMaps(),this.thumbnail=g(this,new S(this.el,this)),this.live&&this.updatePlayed(this.duration),window.ResizeObserver){const t=new ResizeObserver(D((()=>this.updateSize())));t.observe(this.el),g(this,{destroy:()=>t.disconnect()})}this.updateSize()}updateSize(){this.rect.update()}updateRotate(t){this.rotate=t,setTimeout((()=>this.updateSize()))}updateDuration(t){this.duration=t||0,function(t){const e=d(t);return e?!isNaN(t)&&isFinite(t):e}(this.duration)||(this.duration=0),this.duration&&(this.updateMarkerPosition(0),this.chapters.forEach((t=>t.updateFlex(this.duration))),this.updateCurrentHeatMap())}updateConfig(t){t&&(Object.assign(this.config,t),this.live=this.config.live,t.duration&&(this.duration=t.duration),t.dot&&this.updateDot(),t.chapters&&this.updateChapters(t.chapters),t.markers&&this.updateMarkers(),t.heatMap&&(this.heatEl.style.opacity=t.heatMap.hoverShow?"0":"1",this.updateHeatMap(t.heatMap)),null!=t.thumbnail&&this.thumbnail.updateOptions(t.thumbnail),this.live&&this.updatePlayed(this.duration),null!=t.rotate&&(this.rotate=t.rotate),this.dotEl.style.transform="translateY(-50%)",this.updateSize())}updateMarkerPosition(t){this.markers.forEach((e=>{e.time+=t,e.update(this.duration)}))}updatePlayed(t,e){this.dragging&&!e||!this.duration||(this.chapters.forEach(((e,i)=>{e.updatePlayed(t)&&(this.curChapter=i)})),this.dotEl.style.left=t/this.duration*100+"%")}updateBuffer(t){this.chapters.forEach((e=>e.updateBuffer(t)))}updateHover(t,e){let i=!1;const s=this.chapters.length>1;return this.chapters.forEach(((e,r)=>{if(e.updateHover(t)&&!h&&s){const t=this.headMaps[r];t&&(this.prevActiveHeat&&(this.prevActiveHeat.style.transform=""),t.el.style.transform="translateY(-2px)",this.prevActiveHeat=t.el),this.prevActiveChapter&&(this.prevActiveChapter.style.transform=""),e.realEl.style.transform="scaleY(2.5)",this.prevActiveChapter=e.realEl,this.curChapter===r&&(this.dotEl.style.transform="scale(1.5) translateY(-50%)",i=!0)}})),h||!s||i||(this.dotEl.style.transform="translateY(-50%)"),null==e&&(e=t/this.duration*this.getWidth()),this.thumbnail.update(t,e,this.getWidth())}updateDot(){const{dot:t}=this.config;this.dotEl.innerHTML="",t&&!0!==t?l(t)?this.dotEl.innerHTML=t:this.dotEl.appendChild(t):this.dotEl.appendChild(C(".ppbar_dot_i"))}updateChapters(t){const e=this.chapters.length,i=this.duration;if(t.length){const s=Math.max(t.length,e);let r,a,h=0;for(let e=0;e<s;e++)r=this.chapters[e],a=t[e],r&&a?r.update(h,a.time||i,i,a.title):r?(r.destroy(),this.chapters[e]=void 0):this.chapters[e]=new Y(this.chapterEl,i,h,a.time||i,a.title),a&&(h=a.time||i)}else{this.chapters[0].update(0,i,i);for(let t=1;t<e;t++)this.chapters[t].destroy(),this.chapters[t]=void 0}this.chapters=this.chapters.filter(Boolean)}updateMarkers(){this.markers.forEach((t=>t.destroy())),this.markers=[],this.setMarkers()}updateHoverClass(){const{heatMap:t}=this.config;t&&function(t,e,i,s=""){e=s+e,i?t.classList.add(e):!1===i?t.classList.remove(e):t.classList.toggle(e,i)}(this.heatEl,"ppbar_heat-hover",!!t.hoverShow)}updateHeatMap(t){this.updateHoverClass();const e=t.points;if(!e||!e.length)return this.headMaps.forEach((t=>t.destroy())),void(this.headMaps=[]);const i=this.getHeatItems();if(i){const t=Math.max(this.headMaps.length,i.items.length);let e,s;for(let r=0;r<t;r++)e=this.headMaps[r],s=i.items[r],e&&s?e.update(s,i.max,i.flexes[r]):e?(e.destroy(),this.headMaps[r]=void 0):this.headMaps[r]=new I(this.heatEl,s,i.max,i.flexes[r])}else{const t=Math.max(this.chapters.length,this.headMaps.length);for(let e=0;e<t;e++)this.chapters[e]?this.headMaps[e]||(this.headMaps[e]=new I(this.heatEl)):(this.headMaps[e].destroy(),this.headMaps[e]=void 0)}}updateCurrentHeatMap(){if(this.headMaps.length<2)return;const t=this.getHeatItems();t&&t.items.forEach(((e,i)=>{var s;null==(s=this.headMaps[i])||s.update(e,t.max,t.flexes[i])}))}setChapters(){let t=this.duration;const e=this.config.chapters;if(e&&e.length){t=e[e.length-1].time||t;const i=document.createDocumentFragment();let s=0;e.forEach(((e,r)=>{this.chapters[r]=new Y(i,t,s,e.time||t,e.title),s=e.time||0})),this.chapterEl.appendChild(i)}else this.chapters[0]=new Y(this.chapterEl,t,0,t)}setMarkers(){const t=this.config.markers;t&&t.length&&t.forEach(((t,e)=>{this.markers[e]=new z(this,this.markerEl,t)}))}setHeatMaps(){var t;const e=this.config.heatMap;if(!e)return;const i=null==(t=e.points)?void 0:t.length;if(!i||i<2)return;if(!this.duration)return void this.chapters.forEach(((t,e)=>{this.headMaps[e]=new I(this.heatEl)}));const s=this.getHeatItems();s&&s.items.forEach(((t,e)=>{this.headMaps[e]=new I(this.heatEl,t,s.max,s.flexes[e])}))}getHeatItems(){const t=this.duration,e=this.config.heatMap;if(!t||!e)return;const i=e.points,s=i.length;if(!s||s<2)return;const r=null==e?void 0:e.defaultDuration,a=this.chapters,h=a.length>1,n=[[]];let o,l,p,c,u=0,g=0,f=0,m=0,A=0,C=0,v=0;for(let E=0;E<s;E++){if(l=i[E],d(l)?l=i[E]={score:l,duration:r}:l.duration=l.duration||r,null==i[E].duration)return void console.error(`ppbar heatMap.points[${E}].duration is undefined`);i[E].score>g&&(g=i[E].score),m=h?a[u].duration:t,A=l.duration/m*1e3,v=C+A/2,C+=A,h?(f+=l.duration,o=n[u],c=a[u].end,f>c?a[u+1]?(p=f-c,o.push([1e3,l.score]),n[++u]=[[0,l.score]],C=p/a[u].duration*1e3):o.push([1e3,l.score]):o.push([v,l.score])):n[0].push([v,l.score])}return{items:n,flexes:n.map(((t,e)=>h?a[e].el.style.flex:void 0)),max:g}}onMousemove(t){const e=this.getLeft(t),i=this.getCurrentTime(e);this.updateHover(i,e),this.emit(s,i)}getCurrentTime(t){return k(t/this.getWidth())*this.duration}getLeft(t){return this.rotate?90===this.rotate?t.clientY-this.rect.y:this.rect.bottom-t.clientY:t.clientX-this.rect.x}getWidth(){return this.rotate?this.rect.height:this.rect.width}}(P,J);setTimeout((function(){X.updateSize()}),1e3),X.updateBuffer(6*F.value),F.onchange=function(){X.updateBuffer(6*F.value)},X.on("markerClick",(function(t){X.updatePlayed(t.time)})),R.onchange=function(){const t=R.value?Number(R.value):0;90===t?(X.updateRotate(90),P.style.width="300px",P.style.transform="rotate(90deg)"):-90===t?(X.updateRotate(-90),P.style.width="300px",P.style.transform="rotate(-90deg)"):(X.updateRotate(0),P.style.width="",P.style.transform="")},G.onchange=function(){X.updateConfig({live:!!G.checked})},O.onchange=function(){O.checked?(T.checked&&(T.checked=!1),X.updateConfig(j)):X.updateConfig(J),X.el.style.setProperty("--primary-color","#f00"),X.updatePlayed(0),X.updateBuffer(6*F.value)},T.onchange=function(){T.checked?(O.checked&&(O.checked=!1),X.updateConfig(K),X.el.style.setProperty("--primary-color","rgba(35,173,229, 1)")):(X.updateConfig(J),X.el.style.setProperty("--primary-color","#f00")),X.updatePlayed(0),X.updateBuffer(6*F.value)};
//# sourceMappingURL=index.166de500.js.map
