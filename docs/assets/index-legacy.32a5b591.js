!function(){function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,r=s(t);if(e){var n=s(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return a(this,i)}}function a(e,i){if(i&&("object"===t(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=document.createElement("style");u.innerHTML=".ppbar{--primary-color: #f00;position:relative;width:100%;touch-action:none;color:#fff;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}@media not all and (hover: none){.ppbar:hover .ppbar_chapter_i_w{transform:scaleY(1.5)}.ppbar:hover .ppbar_chapter_i_h{opacity:1}.ppbar:hover .ppbar_marker_i_d{transform:scale(2.5) translate(-50%,-50%)}.ppbar:hover .ppbar_heat{transform:translateY(-.85px)}.ppbar:hover .ppbar_heat-hover{opacity:1!important}.ppbar:hover .ppbar_thumb{display:block}.ppbar_dot{opacity:0}.ppbar_dot_i{width:15px;height:15px}.ppbar:hover .ppbar_dot{opacity:1}}.ppbar_chapter{display:flex;position:relative;gap:2px;transition:transform .12s ease}.ppbar_chapter_i{padding:6px 0;flex:1}.ppbar_chapter_i_w{position:relative;height:4px;background:rgba(255,255,255,.2);transition:transform .12s ease;overflow:hidden}.ppbar_chapter_i_w>div{position:absolute;left:0;top:0}.ppbar_chapter_i_p,.ppbar_chapter_i_h,.ppbar_chapter_i_b{width:100%;height:100%;transform-origin:0 0}.ppbar_chapter_i_h{background:rgba(255,255,255,.2);opacity:0}.ppbar_chapter_i_p{transform:scaleX(0);background:#f00;background:var(--primary-color)}.ppbar_chapter_i_b{transform:scaleX(0);background:rgba(255,255,255,.2)}.ppbar_marker{transition:opacity .12s ease}.ppbar_marker-hover{opacity:0}.ppbar_marker_i{position:absolute;bottom:100%;transform:translate(-50%)}.ppbar_marker_i_d{position:absolute;left:50%;bottom:-12.2px;width:4px;height:4px;border-radius:50%;transform:translate(-50%,-50%);transition:transform .12s ease;background:#fff;transform-origin:0 0;pointer-events:none}.ppbar_marker_i_tip{position:absolute;bottom:100%;font-size:12px;border-radius:2px;margin-bottom:10px;padding:3px 6px;white-space:nowrap;background:rgba(0,0,0,.7);pointer-events:none;opacity:0;left:50%;transform:translate(-50%);transition:opacity .2s ease}.ppbar_marker_i:hover{z-index:1}.ppbar_marker_i:hover .ppbar_marker_i_tip{opacity:1}.ppbar_heat{position:absolute;left:0;right:0;bottom:10px;display:flex;gap:2px;height:40px;transition:transform .2s ease,opacity .12s ease}.ppbar_heat-hover{opacity:0}.ppbar_heat_i{flex:1;height:100%}.ppbar_heat_i svg{height:100%}.ppbar_dot{position:absolute;left:0;top:50%;transform:translateY(-50%);pointer-events:none;transition:opacity .2s ease,transform .2s ease;transform-origin:0 0;z-index:1}.ppbar_dot>:first-child{transform:translate(-50%)}.ppbar_dot_i{width:10px;height:10px;border-radius:50%;background:#f00;background:var(--primary-color)}.ppbar_thumb{display:none;position:absolute;left:0;bottom:30px;font-size:13px;font-weight:500;text-align:center;pointer-events:none;text-shadow:0 0 4px rgba(0,0,0,.75)}.ppbar_thumb_img{border:1px solid #fff;box-shadow:0 0 10px rgba(0,0,0,.1);margin-bottom:2px;background-color:rgba(255,255,255,.3);background-repeat:no-repeat}.ppbar_thumb_title{min-height:17px;word-break:break-all}\n",document.head.appendChild(u),System.register([],(function(){"use strict";return{execute:function(){var t="markerClick",r="dragging",a="dragend",s="mousemove",l="mouseleave",u="undefined"!=typeof window,d=u&&("ontouchstart"in window||navigator.maxTouchPoints>0),f=Object.prototype.toString;function v(t){return"string"==typeof t||t instanceof String}function m(t){return"function"==typeof t}function g(t){return"number"==typeof t||"[object Number]"===f.call(t)}var y=!1;if(u)try{var b=Object.defineProperty({},"once",{get:function(){y=!0}});window.addEventListener("test",null,b)}catch(nt){}var _=function(){function t(e,i,r,n){var a;h(this,t),c(this,"node",void 0),c(this,"type",void 0),c(this,"handler",void 0),c(this,"options",void 0),this.node=e,this.type=i,this.handler=r,this.options=n,this.options=!0===(a=n)||!1===a||"[object Boolean]"===f.call(a)?n:!!n&&(y&&n),e.addEventListener(i,r,this.options)}return p(t,[{key:"destroy",value:function(){this.handler&&(this.node.removeEventListener(this.type,this.handler,this.options),this.node=null,this.handler=null,this.options=null)}}]),t}(),k=new Map;function C(t,e){return k.has(t)||k.set(t,[]),k.get(t).push(e),e}function w(t){k.has(t)&&(k.get(t).forEach((function(t){return t.destroy()})),k.delete(t))}function x(t,e,i,r,n){var a=new _(e,i,r,n);return t&&C(t,a),a}var E=/([\w-]+)?(?:#([\w-]+))?((?:\.(?:[\w-]+))*)/;function M(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=[];t&&(n=E.exec(t)||[]);var a=document.createElement(n[1]||"div");return n[2]&&(a.id=n[3]),n[3]&&(a.className=n[3].replace(/\./g," ".concat(r)).trim()),e&&Object.keys(e).forEach((function(t){var i=e[t];void 0!==i&&(/^on\w+$/.test(t)?a[t]=i:"selected"===t?i&&a.setAttribute(t,"true"):a.setAttribute(t,i))})),i&&(v(i)?a.innerHTML=i:i.forEach((function(t){return a.appendChild(t)}))),a}function O(t){t&&(t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t))}var P="http://www.w3.org/2000/svg",H=p((function t(e,i,r){h(this,t),c(this,"fn",void 0),c(this,"context",void 0),c(this,"once",void 0),this.fn=e,this.context=i,this.once=r,this.once=r||!1})),j=function(){function t(){h(this,t),c(this,"_events",Object.create(null)),c(this,"_eventsCount",0)}return p(t,[{key:"emitAsync",value:function(t,e){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;setTimeout((function(){return i.emit(t,e)}),r)}},{key:"emit",value:function(t,e){if(this._events[t]){var i=this._events[t];if(i.fn)i.once&&this.off(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(var r=i.length,n=0;n<r;n++)i[n].once&&this.off(t,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}},{key:"on",value:function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!m(e))throw new TypeError("The listener must be a function");var n=new H(e,i||this,r);return this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],n]:this._events[t].push(n):(this._events[t]=n,this._eventsCount++),{destroy:this.off.bind(this,t,e)}}},{key:"once",value:function(t,e,i){return this.on(t,e,i,!0)}},{key:"off",value:function(t,e,i,r){if(!t)return this._events=Object.create(null),this._eventsCount=0,this;if(!this._events[t])return this;if(!e)return this.clearEvent(t),this;var n=this._events[t],a=[];if(n.fn)n.fn!==e||r&&!n.once||i&&n.context!==i||this.clearEvent(t);else{for(var o=0,s=n.length;o<s;o++)(n[o].fn!==e||r&&!n[o].once||i&&n[o].context!==i)&&a.push(n[o]);a.length?this._events[t]=1===a.length?a[0]:a:this.clearEvent(t)}return this}},{key:"clearEvent",value:function(t){0==--this._eventsCount?this._events=Object.create(null):delete this._events[t]}}]),t}(),z=function(){function t(e){var i=this;h(this,t),c(this,"el",void 0),c(this,"rect",void 0),c(this,"update",(function(){i.rect=i.el.getBoundingClientRect()})),this.el=e,this.rect={}}return p(t,[{key:"width",get:function(){return this.tryUpdate(this.rect.width),this.rect.width}},{key:"height",get:function(){return this.tryUpdate(this.rect.height),this.rect.height}},{key:"x",get:function(){return this.tryUpdate(this.rect.left),this.rect.left}},{key:"y",get:function(){return this.tryUpdate(this.rect.top),this.rect.top}},{key:"bottom",get:function(){return this.rect.bottom}},{key:"right",get:function(){return this.rect.right}},{key:"changed",get:function(){var t=this.el.getBoundingClientRect(),e=t.top!==this.rect.top||t.left!==this.rect.left||t.width!==this.rect.width||t.height!==this.rect.height;return e&&(this.rect=t),e}},{key:"tryUpdate",value:function(t){t||this.update()}},{key:"destroy",value:function(){this.el=null,this.rect=null}}]),t}();function S(t,e,i,r,n){var a;return a=e&&!v(e)?e:M(e,i,r,n),t&&t.appendChild(a),a}var A=function(){function t(e,i,r,n,a){h(this,t),c(this,"el",void 0),this.el=S(e,i,r,n,a)}return p(t,[{key:"destroy",value:function(){O(this.el),w(this)}}]),t}(),B=function(t){i(r,t);var e=n(r);function r(t,i,n,a,s){var l;return h(this,r),c(o(l=e.call(this)),"el",void 0),l.el=S(t,i,n,a,s),l}return p(r,[{key:"destroy",value:function(){O(this.el),w(this)}}]),r}(j),L=function(){function t(e,i,r,n){var a=this;h(this,t),c(this,"el",void 0),c(this,"start",void 0),c(this,"move",void 0),c(this,"end",void 0),c(this,"pending",!1),c(this,"lastEv",void 0),c(this,"downHandler",(function(t){a.el.setPointerCapture(t.pointerId),a.el.addEventListener("pointermove",a.moveHandler,!0),a.el.addEventListener("pointerup",a.upHandler,!0),a.el.addEventListener("pointercancel",a.upHandler,!0),a.start(t)})),c(this,"moveHandler",(function(t){a.lastEv=t,a.pending||(a.pending=!0,requestAnimationFrame(a.handlerMove))})),c(this,"handlerMove",(function(){a.move(a.lastEv),a.pending=!1})),c(this,"upHandler",(function(t){a.el.removeEventListener("pointermove",a.moveHandler,!0),a.el.removeEventListener("pointerup",a.upHandler,!0),a.el.removeEventListener("pointercancel",a.upHandler,!0),a.end&&requestAnimationFrame((function(){return a.end(t)}))})),this.el=e,this.start=i,this.move=r,this.end=n,e.addEventListener("pointerdown",this.downHandler,!0)}return p(t,[{key:"destroy",value:function(){this.el&&(this.el.removeEventListener("pointerdown",this.downHandler,!0),this.el.removeEventListener("pointerup",this.upHandler,!0),this.el.removeEventListener("pointercancel",this.upHandler,!0),this.el.removeEventListener("pointermove",this.moveHandler,!0),this.start=null,this.move=null,this.end=null,this.lastEv=null,this.el=null)}}]),t}();function D(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";if((t=String(t)).length>=e)return t;for(var r=0,n=e-t.length;r<n;r++)t=i+t;return t}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(Math.min(t,i),e)}function R(t,e){var i=!1,r=!0,n=null;return function(){if(n=arguments,r)return r=!1,t.apply(e,n);i||(i=!0,requestAnimationFrame((function(){t.apply(e,n),i=!1})))}}var F=function(t){i(r,t);var e=n(r);function r(t,i,n,a,o){var s;h(this,r),(s=e.call(this,t,".ppbar_chapter_i")).start=n,s.end=a,s.title=o,s.duration=0;var l=s.realEl=s.el.appendChild(M(".ppbar_chapter_i_w"));return s.bufferedEl=l.appendChild(M(".ppbar_chapter_i_b")),s.hoverEl=l.appendChild(M(".ppbar_chapter_i_h")),s.playedEl=l.appendChild(M(".ppbar_chapter_i_p")),s.update(n,a,i,o),s}return p(r,[{key:"update",value:function(t,e,i,r){this.start=t,this.end=e,this.duration=e-t,this.title=r||"",this.updateFlex(i)}},{key:"updateFlex",value:function(t){this.end<=this.start&&(this.end=t,this.duration=this.end-this.start),this.el.style.flex=String(Math.max(0,this.duration/t))}},{key:"match",value:function(t){return t>=this.start&&t<=this.end}},{key:"updateHover",value:function(t){return this.setBar(t,this.hoverEl)}},{key:"updateBuffer",value:function(t){return this.setBar(t,this.bufferedEl)}},{key:"updatePlayed",value:function(t){return this.setBar(t,this.playedEl)}},{key:"setBar",value:function(t,e){var i=this.match(t);return e.style.transform="scaleX(".concat(i?(t-this.start)/this.duration:t>this.end?1:0,")"),i}}]),r}(A),I=0,N=function(t){i(r,t);var e=n(r);function r(t,i,n,a){var o;h(this,r),o=e.call(this,t,".ppbar_heat_i");var s=document.createElementNS(P,"svg");o.pathEl=document.createElementNS(P,"path");var l=document.createElementNS(P,"defs"),p=document.createElementNS(P,"clipPath"),c=document.createElementNS(P,"rect");return s.setAttribute("viewBox","0 0 1000 100"),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("width","100%"),p.setAttribute("id","ppb".concat(I)),c.setAttribute("clip-path","url(#ppb".concat(I,")")),c.setAttribute("fill","white"),c.setAttribute("fill-opacity","0.2"),c.setAttribute("width","100%"),c.setAttribute("height","100%"),c.setAttribute("x","0"),c.setAttribute("y","0"),p.appendChild(o.pathEl),l.appendChild(p),s.appendChild(l),s.appendChild(c),I++,i&&n&&o.update(i,n,a),o.el.appendChild(s),o}return p(r,[{key:"update",value:function(t,e,i){var r,n,a,o=this,s=["M0 100"],h=[0,100],l=[],p=0,c=0,u=function(t){if(t)return[t[0],100*(1-t[1]/e)]};t.forEach((function(e,i){l=r||u(e),r=u(t[i+1])||[1e3,100];var d=o.slope(h,r);n=-.3*(r[0]-l[0]),a=n*d*.6,s.push("C ".concat((h[0]-p).toFixed(1)," ").concat((h[1]-c).toFixed(1),", ").concat((l[0]+n).toFixed(1)," ").concat((l[1]+a).toFixed(1),", ").concat(l[0].toFixed(1)," ").concat(l[1].toFixed(1))),p=n,c=a,h=l})),s.push("C ".concat((l[0]-p).toFixed(1)," ").concat((l[1]-c).toFixed(1),", 1000 100, 1000 100")),this.pathEl.setAttributeNS(null,"d",s.join(" ")),this.el.style.flex=i||"1"}},{key:"slope",value:function(t,e){return(e[1]-t[1])/(e[0]-t[0])}}]),r}(A),Y=function(e){i(a,e);var r=n(a);function a(e,i,n){var s;if(h(this,a),(s=r.call(this,i,".ppbar_marker_i")).cfg=n,s.tipEl=s.el.appendChild(M(".ppbar_marker_i_tip")),n.title&&(s.title=n.title,s.tipEl.textContent=n.title),s.el.appendChild(M(".ppbar_marker_i_d")),n.image){var l,p,c=new Image(null===(l=n.size)||void 0===l?void 0:l[0],null===(p=n.size)||void 0===p?void 0:p[1]);c.src=n.image,s.el.appendChild(c)}else n.el&&(n.size&&n.size.length>1&&(n.el.style.width="".concat(n.size[0],"px"),n.el.style.height="".concat(n.size[1],"px")),s.el.appendChild(n.el));return x(o(s),s.el,"click",(function(){e.emit(t,s.cfg)})),s.time=n.time,s.update(e.duration),s}return p(a,[{key:"update",value:function(t){t&&(this.time<0?this.el.style.right="".concat(-this.time/t*100,"%"):this.el.style.left="".concat(this.time/t*100,"%"))}}]),a}(A),U=function(t){i(r,t);var e=n(r);function r(t,i){var n;return h(this,r),(n=e.call(this,t,".ppbar_thumb")).prog=i,n.opts={start:0,gap:10,col:5,row:5,width:160,height:90,images:[]},n.imgEl=n.el.appendChild(M(".ppbar_thumb_img")),n.titleEl=n.el.appendChild(M(".ppbar_thumb_title")),n.timeEl=n.el.appendChild(M(".ppbar_thumb_time")),n.rect=C(o(n),new z(n.el)),n.updateOptions(n.prog.config.thumbnail),n}return p(r,[{key:"updateOptions",value:function(t){if(!1!==t){this.el.style.opacity="1";var e=Object.assign(this.opts,t);e.images.length?(this.imgEl.style.display="block",this.titleEl.style.width=this.imgEl.style.width="".concat(e.width,"px"),this.imgEl.style.height="".concat(e.height,"px"),this.thumbImgPrePic=e.col*e.row,this.ssGapRatio=e.start/e.gap):this.imgEl.style.display="none",this.rect.update()}else this.el.style.opacity="0"}},{key:"update",value:function(t,e,i){if(this.opts.images.length){var r=this.getCurrentThumb(t);r&&(this.imgEl.style.backgroundImage="url(".concat(r.url,")"),this.imgEl.style.backgroundPosition="-".concat(r.x,"px -").concat(r.y,"px"))}else this.rect.update();var n=this.prog.live;this.timeEl.textContent="".concat(n?"-":"").concat(function(t){if(!isFinite(t)||isNaN(t))return"";if(!t)return"0:00";var e,i=t<0;return i&&(t*=-1),e=(t=Math.round(t))<60?"0:".concat(D(t)):t<3600?"".concat(~~(t/60),":").concat(D(t%60)):"".concat(~~(t/3600),":").concat(D(~~(t%3600/60)),":").concat(D(t%60)),i&&(e="-".concat(e)),e}(n?this.prog.duration-t:t));var a,o=this.prog,s=o.markers,h=o.chapters;if(s.length)for(var l,p=0,c=s.length;p<c;p++)if(t>=(l=s[p]).time&&t<l.time+2){a=l.title;break}if(!a&&h.length)for(var u,d=0,f=h.length;d<f;d++)if(t>=(u=h[d]).start&&t<=u.end){a=u.title;break}this.titleEl.textContent=a||"";var v=this.rect.width/2;this.el.style.left="".concat(T(e-v,0,Math.max(0,i-2*v)),"px")}},{key:"getCurrentThumb",value:function(t){var e=0|Math.max(t/this.opts.gap-this.ssGapRatio,0),i=this.opts.images[e/this.thumbImgPrePic|0];if(i)return{url:i,x:e%this.opts.col*this.opts.width,y:~~(e%this.thumbImgPrePic/this.opts.row)*this.opts.height}}}]),r}(A),W=function(t){i(f,t);var u=n(f);function f(t,i){var n;h(this,f),(n=u.call(this,t,".ppbar")).duration=0,n.rotate=0,n.live=!1,n.chapters=[],n.markers=[],n.headMaps=[],n.curChapter=0,n.dragging=!1,n.onMouseleave=function(){n.emit(l),setTimeout((function(){n.prevActiveChapter&&(n.prevActiveChapter.style.transform="",n.prevActiveChapter=void 0),n.prevActiveHeat&&(n.prevActiveHeat.style.transform="",n.prevActiveHeat=void 0)}))},n.onDragStart=function(t){var e;(n.dragging=!0,n.updateSize(),d)&&(null!==(e=n.config.heatMap)&&void 0!==e&&e.hoverShow&&(n.heatEl.style.opacity="1"),n.thumbnail.el.style.display="block");n.onDragging(t)},n.onDragging=function(t){var e=n.getLeft(t),i=n.getCurrentTime(e);n.updatePlayed(i,!0),n.updateHover(i,e),n.emit(r,i)},n.config=function(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?e(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},i);var s=n.config,p=s.duration,v=s.live,m=s.rotate;if(n.rotate=m||0,n.updateDuration(p),n.live=v,n.heatEl=n.el.appendChild(M(".ppbar_heat")),n.chapterEl=n.el.appendChild(M(".ppbar_chapter")),n.markerEl=n.el.appendChild(M(".ppbar_marker")),n.dotEl=n.el.appendChild(M(".ppbar_dot")),n.updateDot(),n.updateHoverClass(),n.rect=C(o(n),new z(n.el)),C(o(n),new L(n.chapterEl,n.onDragStart,n.onDragging,(function(t){var e;(n.dragging=!1,d)&&(null!==(e=n.config.heatMap)&&void 0!==e&&e.hoverShow&&(n.heatEl.style.opacity="0"),n.thumbnail.el.style.display="none");n.emit(a,n.getCurrentTime(n.getLeft(t)))}))),x(o(n),n.el,"mousemove",R((function(t){return n.onMousemove(t)})),!0),x(o(n),n.el,"mouseleave",R(n.onMouseleave),!1),n.setChapters(),n.setMarkers(),n.setHeatMaps(),n.thumbnail=C(o(n),new U(n.el,o(n))),n.live&&n.updatePlayed(n.duration),window.ResizeObserver){var g=new ResizeObserver(R((function(){return n.updateSize()})));g.observe(n.el),C(o(n),{destroy:function(){return g.disconnect()}})}return n.updateSize(),n}return p(f,[{key:"updateSize",value:function(){this.rect.update()}},{key:"updateRotate",value:function(t){var e=this;this.rotate=t,setTimeout((function(){return e.updateSize()}))}},{key:"updateDuration",value:function(t){var e,i,r=this;this.duration=t||0,e=this.duration,((i=g(e))?!isNaN(e)&&isFinite(e):i)||(this.duration=0),this.duration&&(this.updateMarkerPosition(0),this.chapters.forEach((function(t){return t.updateFlex(r.duration)})),this.updateCurrentHeatMap())}},{key:"updateConfig",value:function(t){t&&(Object.assign(this.config,t),this.live=this.config.live,t.duration&&(this.duration=t.duration),t.dot&&this.updateDot(),t.chapters&&this.updateChapters(t.chapters),t.markers&&this.updateMarkers(),t.heatMap&&(this.heatEl.style.opacity=t.heatMap.hoverShow?"0":"1",this.updateHeatMap(t.heatMap)),null!=t.thumbnail&&this.thumbnail.updateOptions(t.thumbnail),this.live&&this.updatePlayed(this.duration),null!=t.rotate&&(this.rotate=t.rotate),this.dotEl.style.transform="translateY(-50%)",this.updateSize())}},{key:"updateMarkerPosition",value:function(t){var e=this;this.markers.forEach((function(i){i.time+=t,i.update(e.duration)}))}},{key:"updatePlayed",value:function(t,e){var i=this;this.dragging&&!e||!this.duration||(this.chapters.forEach((function(e,r){e.updatePlayed(t)&&(i.curChapter=r)})),this.dotEl.style.left="".concat(t/this.duration*100,"%"))}},{key:"updateBuffer",value:function(t){this.chapters.forEach((function(e){return e.updateBuffer(t)}))}},{key:"updateHover",value:function(t,e){var i=this,r=!1,n=this.chapters.length>1;return this.chapters.forEach((function(e,a){if(e.updateHover(t)&&!d&&n){var o=i.headMaps[a];o&&(i.prevActiveHeat&&(i.prevActiveHeat.style.transform=""),o.el.style.transform="translateY(-2px)",i.prevActiveHeat=o.el),i.prevActiveChapter&&(i.prevActiveChapter.style.transform=""),e.realEl.style.transform="scaleY(2.5)",i.prevActiveChapter=e.realEl,i.curChapter===a&&(i.dotEl.style.transform="scale(1.5) translateY(-50%)",r=!0)}})),d||!n||r||(this.dotEl.style.transform="translateY(-50%)"),null==e&&(e=t/this.duration*this.getWidth()),this.thumbnail.update(t,e,this.getWidth())}},{key:"updateDot",value:function(){var t=this.config.dot;this.dotEl.innerHTML="",t&&!0!==t?v(t)?this.dotEl.innerHTML=t:this.dotEl.appendChild(t):this.dotEl.appendChild(M(".ppbar_dot_i"))}},{key:"updateChapters",value:function(t){var e=this.chapters.length,i=this.duration;if(t.length)for(var r,n,a=Math.max(t.length,e),o=0,s=0;s<a;s++)r=this.chapters[s],n=t[s],r&&n?r.update(o,n.time||i,i,n.title):r?(r.destroy(),this.chapters[s]=void 0):this.chapters[s]=new F(this.chapterEl,i,o,n.time||i,n.title),n&&(o=n.time||i);else{this.chapters[0].update(0,i,i);for(var h=1;h<e;h++)this.chapters[h].destroy(),this.chapters[h]=void 0}this.chapters=this.chapters.filter(Boolean)}},{key:"updateMarkers",value:function(){this.markers.forEach((function(t){return t.destroy()})),this.markers=[],this.setMarkers()}},{key:"updateHoverClass",value:function(){var t=this.config.heatMap;t&&function(t,e,i){e=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")+e,i?t.classList.add(e):!1===i?t.classList.remove(e):t.classList.toggle(e,i)}(this.heatEl,"ppbar_heat-hover",!!t.hoverShow)}},{key:"updateHeatMap",value:function(t){this.updateHoverClass();var e=t.points;if(!e||!e.length)return this.headMaps.forEach((function(t){return t.destroy()})),void(this.headMaps=[]);var i=this.getHeatItems();if(i)for(var r,n,a=Math.max(this.headMaps.length,i.items.length),o=0;o<a;o++)r=this.headMaps[o],n=i.items[o],r&&n?r.update(n,i.max,i.flexes[o]):r?(r.destroy(),this.headMaps[o]=void 0):this.headMaps[o]=new N(this.heatEl,n,i.max,i.flexes[o]);else for(var s=Math.max(this.chapters.length,this.headMaps.length),h=0;h<s;h++)this.chapters[h]?this.headMaps[h]||(this.headMaps[h]=new N(this.heatEl)):(this.headMaps[h].destroy(),this.headMaps[h]=void 0)}},{key:"updateCurrentHeatMap",value:function(){var t=this;if(!(this.headMaps.length<2)){var e=this.getHeatItems();e&&e.items.forEach((function(i,r){var n;null===(n=t.headMaps[r])||void 0===n||n.update(i,e.max,e.flexes[r])}))}}},{key:"setChapters",value:function(){var t=this,e=this.duration,i=this.config.chapters;if(i&&i.length){e=i[i.length-1].time||e;var r=document.createDocumentFragment(),n=0;i.forEach((function(i,a){t.chapters[a]=new F(r,e,n,i.time||e,i.title),n=i.time||0})),this.chapterEl.appendChild(r)}else this.chapters[0]=new F(this.chapterEl,e,0,e)}},{key:"setMarkers",value:function(){var t=this,e=this.config.markers;e&&e.length&&e.forEach((function(e,i){t.markers[i]=new Y(t,t.markerEl,e)}))}},{key:"setHeatMaps",value:function(){var t,e=this,i=this.config.heatMap;if(i){var r=null===(t=i.points)||void 0===t?void 0:t.length;if(r&&!(r<2))if(this.duration){var n=this.getHeatItems();n&&n.items.forEach((function(t,i){e.headMaps[i]=new N(e.heatEl,t,n.max,n.flexes[i])}))}else this.chapters.forEach((function(t,i){e.headMaps[i]=new N(e.heatEl)}))}}},{key:"getHeatItems",value:function(){var t=this.duration,e=this.config.heatMap;if(t&&e){var i=e.points,r=i.length;if(r&&!(r<2)){for(var n,a,o,s,h=null==e?void 0:e.defaultDuration,l=this.chapters,p=l.length>1,c=[[]],u=0,d=0,f=0,v=0,m=0,y=0,b=0,_=0;_<r;_++){if(g(a=i[_])?a=i[_]={score:a,duration:h}:a.duration=a.duration||h,null==i[_].duration)return void console.error("ppbar heatMap.points[".concat(_,"].duration is undefined"));i[_].score>d&&(d=i[_].score),v=p?l[u].duration:t,b=y+(m=a.duration/v*1e3)/2,y+=m,p?(f+=a.duration,n=c[u],f>(s=l[u].end)?l[u+1]?(o=f-s,n.push([1e3,a.score]),c[++u]=[[0,a.score]],y=o/l[u].duration*1e3):n.push([1e3,a.score]):n.push([b,a.score])):c[0].push([b,a.score])}return{items:c,flexes:c.map((function(t,e){return p?l[e].el.style.flex:void 0})),max:d}}}}},{key:"onMousemove",value:function(t){var e=this.getLeft(t),i=this.getCurrentTime(e);this.updateHover(i,e),this.emit(s,i)}},{key:"getCurrentTime",value:function(t){return T(t/this.getWidth())*this.duration}},{key:"getLeft",value:function(t){return this.rotate?90===this.rotate?t.clientY-this.rect.y:this.rect.bottom-t.clientY:t.clientX-this.rect.x}},{key:"getWidth",value:function(){return this.rotate?this.rect.height:this.rect.width}}]),f}(B),X="./assets/m1.5e10f6e3.png",q="./assets/m2.df4d84ec.png",G="./assets/m3.3c59fef5.png",$=document.getElementById("c"),J=document.getElementById("buffer"),K=document.getElementById("rotate"),Q=document.getElementById("live"),V=document.getElementById("youtube"),Z=document.getElementById("bilibili"),tt={dot:!0,duration:600,live:!1,chapters:[{time:100,title:"chapter-a"},{time:280,title:"chapter-b"},{time:510,title:"chapter-c"},{title:"chapter-d"}],markers:[{time:150,title:"title1",image:X,size:[32,34]},{time:300,title:"title2",image:q,size:[32,34]},{time:550,title:"title3",image:G,size:[32,34]}],heatMap:{points:[9592,9692,10063,41138,30485,23905,10966.5,10316.5,8533.5,7249,7181,6813,5929,18046.5,8817,3684.5,4863.5,7818,11122,11977.5,12045.5,6882,8616,3389.5,2791.5,2378,2415,3561.5,4563.5,5351,5166,3649.5,3817.5,6808,3503,2831.5,2617.5,2401,2149,2478.5,2498.5,2311.5,1843.5,1800,2101,2002.5,2882.5,3380,3880,3966,3257,8804,5440,6468,6432,3885,3611,7348,11954,12317,5834,1549.5,1658.5,1649,2053,3831.5,6050.5,7764,8290,8549,5757,1898,1393,1263.5,1356.5,2841,5774,4294,1798,1260.5],defaultDuration:7.5},thumbnail:{images:["./assets/t1.3b083484.jpg","./assets/t2.b7afa5ab.jpg","./assets/t3.4b7b4485.jpg"]}},et={dot:!0,chapters:[{time:100,title:"chapter-a"},{time:280,title:"chapter-b"},{time:510,title:"chapter-c"},{title:"chapter-d"}],markers:[],heatMap:{points:[9592,9692,10063,41138,30485,23905,10966.5,10316.5,8533.5,7249,7181,6813,5929,18046.5,8817,3684.5,4863.5,7818,11122,11977.5,12045.5,6882,8616,3389.5,2791.5,2378,2415,3561.5,4563.5,5351,5166,3649.5,3817.5,6808,3503,2831.5,2617.5,2401,2149,2478.5,2498.5,2311.5,1843.5,1800,2101,2002.5,2882.5,3380,3880,3966,3257,8804,5440,6468,6432,3885,3611,7348,11954,12317,5834,1549.5,1658.5,1649,2053,3831.5,6050.5,7764,8290,8549,5757,1898,1393,1263.5,1356.5,2841,5774,4294,1798,1260.5],hoverShow:!0,defaultDuration:7.5}},it={dot:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18" preserveAspectRatio="xMidYMid meet"><defs><clipPath id="__lottie_element_25"><rect width="18" height="18" x="0" y="0"></rect></clipPath></defs><g clip-path="url(#__lottie_element_25)"><g transform="matrix(1,0,0,1,8.937000274658203,8.25)" opacity="0.14" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0.07500000298023224,1.2130000591278076)"><path fill="rgb(251,114,153)" fill-opacity="1" d=" M9,-3.5 C9,-3.5 9,3.5 9,3.5 C9,5.707600116729736 7.207600116729736,7.5 5,7.5 C5,7.5 -5,7.5 -5,7.5 C-7.207600116729736,7.5 -9,5.707600116729736 -9,3.5 C-9,3.5 -9,-3.5 -9,-3.5 C-9,-5.707600116729736 -7.207600116729736,-7.5 -5,-7.5 C-5,-7.5 5,-7.5 5,-7.5 C7.207600116729736,-7.5 9,-5.707600116729736 9,-3.5z"></path></g></g><g transform="matrix(1,0,0,1,9.140999794006348,8.67199993133545)" opacity="0.28" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,-0.1509999930858612,0.7990000247955322)"><path fill="rgb(251,114,153)" fill-opacity="1" d=" M8,-3 C8,-3 8,3 8,3 C8,4.931650161743164 6.431650161743164,6.5 4.5,6.5 C4.5,6.5 -4.5,6.5 -4.5,6.5 C-6.431650161743164,6.5 -8,4.931650161743164 -8,3 C-8,3 -8,-3 -8,-3 C-8,-4.931650161743164 -6.431650161743164,-6.5 -4.5,-6.5 C-4.5,-6.5 4.5,-6.5 4.5,-6.5 C6.431650161743164,-6.5 8,-4.931650161743164 8,-3z"></path></g></g><g transform="matrix(0.9883429408073425,-0.7275781631469727,0.6775955557823181,0.920446515083313,7.3224687576293945,-0.7606706619262695)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(0.9937776327133179,-0.11138220876455307,0.11138220876455307,0.9937776327133179,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z"></path></g></g><g transform="matrix(1.1436611413955688,0.7535901665687561,-0.6317168474197388,0.9587040543556213,16.0070743560791,2.902894973754883)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(0.992861807346344,0.1192704513669014,-0.1192704513669014,0.992861807346344,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z"></path></g></g><g transform="matrix(1,0,0,1,8.890999794006348,8.406000137329102)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,0.09099999815225601,1.1009999513626099)"><path fill="rgb(255,255,255)" fill-opacity="1" d=" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z"></path><path stroke-linecap="butt" stroke-linejoin="miter" fill-opacity="0" stroke-miterlimit="4" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="1.5" d=" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z"></path></g></g><g transform="matrix(1,0,0,1,8.89900016784668,8.083999633789062)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.875,-1.125 C0.875,-1.125 0.875,1.125 0.875,1.125 C0.875,1.607912540435791 0.48291251063346863,2 0,2 C0,2 0,2 0,2 C-0.48291251063346863,2 -0.875,1.607912540435791 -0.875,1.125 C-0.875,1.125 -0.875,-1.125 -0.875,-1.125 C-0.875,-1.607912540435791 -0.48291251063346863,-2 0,-2 C0,-2 0,-2 0,-2 C0.48291251063346863,-2 0.875,-1.607912540435791 0.875,-1.125z"></path></g></g><g transform="matrix(1,0,0,1,14.008999824523926,8.083999633789062)" opacity="1" style="display: block;"><g opacity="1" transform="matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)"><path fill="rgb(0,0,0)" fill-opacity="1" d=" M0.8999999761581421,-1.100000023841858 C0.8999999761581421,-1.100000023841858 0.8999999761581421,1.100000023841858 0.8999999761581421,1.100000023841858 C0.8999999761581421,1.596709966659546 0.4967099726200104,2 0,2 C0,2 0,2 0,2 C-0.4967099726200104,2 -0.8999999761581421,1.596709966659546 -0.8999999761581421,1.100000023841858 C-0.8999999761581421,1.100000023841858 -0.8999999761581421,-1.100000023841858 -0.8999999761581421,-1.100000023841858 C-0.8999999761581421,-1.596709966659546 -0.4967099726200104,-2 0,-2 C0,-2 0,-2 0,-2 C0.4967099726200104,-2 0.8999999761581421,-1.596709966659546 0.8999999761581421,-1.100000023841858z"></path></g></g></g></svg>',chapters:[],markers:[{time:150,title:"title1",image:X,size:[32,34]},{time:300,title:"title2",image:q,size:[32,34]},{time:550,title:"title3",image:G,size:[32,34]}],heatMap:{points:[9592,9692,10063,41138,30485,23905,10966.5,10316.5,8533.5,7249,7181,6813,5929,18046.5,8817,3684.5,4863.5,7818,11122,11977.5,12045.5,6882,8616,3389.5,2791.5,2378,2415,3561.5,4563.5,5351,5166,3649.5,3817.5,6808,3503,2831.5,2617.5,2401,2149,2478.5,2498.5,2311.5,1843.5,1800,2101,2002.5,2882.5,3380,3880,3966,3257,8804,5440,6468,6432,3885,3611,7348,11954,12317,5834,1549.5,1658.5,1649,2053,3831.5,6050.5,7764,8290,8549,5757,1898,1393,1263.5,1356.5,2841,5774,4294,1798,1260.5],defaultDuration:7.5}},rt=new W($,tt);setTimeout((function(){rt.updateSize()}),1e3),rt.updateBuffer(6*J.value),J.onchange=function(){rt.updateBuffer(6*J.value)},rt.on("markerClick",(function(t){rt.updatePlayed(t.time)})),K.onchange=function(){var t=K.value?Number(K.value):0;90===t?(rt.updateRotate(90),$.style.width="300px",$.style.transform="rotate(90deg)"):-90===t?(rt.updateRotate(-90),$.style.width="300px",$.style.transform="rotate(-90deg)"):(rt.updateRotate(0),$.style.width="",$.style.transform="")},Q.onchange=function(){rt.updateConfig({live:!!Q.checked})},V.onchange=function(){V.checked?(Z.checked&&(Z.checked=!1),rt.updateConfig(et)):rt.updateConfig(tt),rt.el.style.setProperty("--primary-color","#f00"),rt.updatePlayed(0),rt.updateBuffer(6*J.value)},Z.onchange=function(){Z.checked?(V.checked&&(V.checked=!1),rt.updateConfig(it),rt.el.style.setProperty("--primary-color","rgba(35,173,229, 1)")):(rt.updateConfig(tt),rt.el.style.setProperty("--primary-color","#f00")),rt.updatePlayed(0),rt.updateBuffer(6*J.value)}}}}))}();
//# sourceMappingURL=index-legacy.32a5b591.js.map
