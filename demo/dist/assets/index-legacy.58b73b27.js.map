{"version":3,"file":"index-legacy.58b73b27.js","sources":["../../../vite/modulepreload-polyfill","../../../src/constants.ts","../../../node_modules/wblib/lib/env.js","../../../node_modules/wblib/lib/is.js","../../../node_modules/wblib/lib/destroyable.js","../../../node_modules/wblib/lib/dom.js","../../../node_modules/wblib/lib/emitter.js","../../../node_modules/wblib/lib/rect.js","../../../node_modules/wblib/lib/component.js","../../../node_modules/wblib/lib/drag.js","../../../node_modules/wblib/lib/format.js","../../../node_modules/wblib/lib/fn.js","../../../src/chapter.ts","../../../src/heat-map.ts","../../../src/marker.ts","../../../src/thumbnail.ts","../../../src/progress-bar.ts","../../m1.png","../../m2.png","../../m3.png","../../index.js","../../t1.jpg","../../t2.jpg","../../t3.jpg"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","export const EVENT = {\n  MARKER_CLICK: 'markerClick',\n  DRAGGING: 'dragging',\n  DRAGEND: 'dragend',\n  MOUSEMOVE: 'mousemove',\n  MOUSELEAVE: 'mouseleave',\n} as const;\n","const isBrowser = typeof window !== 'undefined';\n\nexport { isBrowser };\n","const toString = Object.prototype.toString;\r\nfunction isString(o) {\r\n    return typeof o === 'string' || o instanceof String;\r\n}\r\nfunction isBool(o) {\r\n    return o === true || o === false || (toString.call(o) === '[object Boolean]');\r\n}\r\nfunction isFunction(o) {\r\n    return typeof o === 'function';\r\n}\r\nfunction isNumber(o) {\r\n    return typeof o === 'number' || (toString.call(o) === '[object Number]');\r\n}\r\nfunction isValidNumber(o) {\r\n    const r = isNumber(o);\r\n    if (!r)\r\n        return r;\r\n    // eslint-disable-next-line no-restricted-globals\r\n    return (!isNaN(o) && isFinite(o));\r\n}\n\nexport { isBool, isFunction, isNumber, isString, isValidNumber };\n","import { isBrowser } from './env.js';\nimport { isBool } from './is.js';\n\nlet thirdOptsSupported = false;\r\nif (isBrowser) {\r\n    try {\r\n        const options = Object.defineProperty({}, 'once', { get() { thirdOptsSupported = true; } });\r\n        window.addEventListener('test', null, options);\r\n        // eslint-disable-next-line no-empty\r\n    }\r\n    catch (e) { }\r\n}\r\nclass DomListener {\r\n    node;\r\n    type;\r\n    handler;\r\n    options;\r\n    constructor(node, type, handler, options) {\r\n        this.node = node;\r\n        this.type = type;\r\n        this.handler = handler;\r\n        this.options = options;\r\n        this.options = isBool(options) ? options : options ? (thirdOptsSupported && options) : false;\r\n        node.addEventListener(type, handler, this.options);\r\n    }\r\n    destroy() {\r\n        if (!this.handler)\r\n            return;\r\n        this.node.removeEventListener(this.type, this.handler, this.options);\r\n        this.node = null;\r\n        this.handler = null;\r\n        this.options = null;\r\n    }\r\n}\r\nconst destroyableMap = new Map();\r\nfunction getDestroyableMap() {\r\n    return destroyableMap;\r\n}\r\nfunction addDestroyable(key, destroyable) {\r\n    if (!destroyableMap.has(key))\r\n        destroyableMap.set(key, []);\r\n    destroyableMap.get(key).push(destroyable);\r\n    return destroyable;\r\n}\r\nfunction callAndRemoveDestroyable(key, destroyable) {\r\n    if (!destroyable)\r\n        return;\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.set(key, destroyableMap.get(key).filter((x) => x !== destroyable));\r\n    }\r\n    destroyable.destroy();\r\n}\r\nfunction destroy(key) {\r\n    if (destroyableMap.has(key)) {\r\n        destroyableMap.get(key).forEach((item) => item.destroy());\r\n        destroyableMap.delete(key);\r\n    }\r\n}\r\nfunction addDestroyableListener(key, el, type, listener, options) {\r\n    const domListener = new DomListener(el, type, listener, options);\r\n    if (key)\r\n        addDestroyable(key, domListener);\r\n    return domListener;\r\n}\n\nexport { DomListener, addDestroyable, addDestroyableListener, callAndRemoveDestroyable, destroy, getDestroyableMap };\n","import { isString } from './is.js';\n\nconst SELECTOR_REGEX = /([\\w-]+)?(?:#([\\w-]+))?((?:\\.(?:[\\w-]+))*)/;\r\nfunction $(desc, attrs, children, classPrefix = '') {\r\n    let match = [];\r\n    if (desc)\r\n        match = SELECTOR_REGEX.exec(desc) || [];\r\n    const el = document.createElement(match[1] || 'div');\r\n    if (match[2])\r\n        el.id = match[3];\r\n    if (match[3])\r\n        el.className = match[3].replace(/\\./g, ` ${classPrefix}`).trim();\r\n    if (attrs) {\r\n        Object.keys(attrs).forEach((name) => {\r\n            const value = attrs[name];\r\n            if (value === undefined)\r\n                return;\r\n            if (/^on\\w+$/.test(name)) {\r\n                el[name] = value;\r\n            }\r\n            else if (name === 'selected') {\r\n                if (value) {\r\n                    el.setAttribute(name, 'true');\r\n                }\r\n            }\r\n            else {\r\n                el.setAttribute(name, value);\r\n            }\r\n        });\r\n    }\r\n    if (children) {\r\n        if (isString(children)) {\r\n            el.innerHTML = children;\r\n        }\r\n        else {\r\n            children.forEach((c) => el.appendChild(c));\r\n        }\r\n    }\r\n    return el;\r\n}\r\nfunction removeNode(node) {\r\n    if (!node)\r\n        return;\r\n    if (node.remove) {\r\n        node.remove();\r\n    }\r\n    else if (node.parentNode) {\r\n        node.parentNode.removeChild(node);\r\n    }\r\n}\r\nfunction show(node) {\r\n    node.style.display = '';\r\n}\r\nfunction hide(node) {\r\n    node.style.display = 'none';\r\n}\r\nfunction addClass(dom, cls = '', prefix = '') {\r\n    cls = cls.trim();\r\n    if (!cls)\r\n        return dom;\r\n    if (dom.classList) {\r\n        cls.split(' ').forEach((c) => dom.classList.add(prefix + c));\r\n    }\r\n    else {\r\n        const oldCls = (dom.className && dom.className.baseVal) || '';\r\n        dom.setAttribute('class', (oldCls ? `${oldCls} ` : '') + cls.split(' ').map((c) => prefix + c).join(' '));\r\n    }\r\n    return dom;\r\n}\r\nfunction removeClass(dom, cls, prefix = '') {\r\n    dom.classList.remove(prefix + cls);\r\n    return dom;\r\n}\r\nfunction containClass(dom, cls, prefix = '') {\r\n    return dom.classList.contains(prefix + cls);\r\n}\r\nfunction toggleClass(dom, cls, force, prefix = '') {\r\n    cls = prefix + cls;\r\n    if (force) {\r\n        dom.classList.add(cls);\r\n        return true;\r\n    }\r\n    if (force === false) {\r\n        dom.classList.remove(cls);\r\n        return true;\r\n    }\r\n    return dom.classList.toggle(cls, force);\r\n}\r\nconst svgNS = 'http://www.w3.org/2000/svg';\n\nexport { $, addClass, containClass, hide, removeClass, removeNode, show, svgNS, toggleClass };\n","import { isFunction } from './is.js';\n\n/**\r\n * @see https://github.com/primus/eventemitter3\r\n *\r\n * Representation of a single event listener.\r\n *\r\n * @param {Function} fn The listener function.\r\n * @param {*} context The context to invoke the listener with.\r\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\r\n * @constructor\r\n * @private\r\n */\r\nclass EE {\r\n    fn;\r\n    context;\r\n    once;\r\n    constructor(fn, context, once) {\r\n        this.fn = fn;\r\n        this.context = context;\r\n        this.once = once;\r\n        this.once = once || false;\r\n    }\r\n}\r\n/**\r\n * Minimal `EventEmitter` interface that is molded against the Node.js\r\n * `EventEmitter` interface.\r\n *\r\n * @constructor\r\n * @public\r\n */\r\nclass EventEmitter {\r\n    _events = Object.create(null);\r\n    _eventsCount = 0;\r\n    emitAsync(evt, a1, time = 0) {\r\n        setTimeout(() => this.emit(evt, a1), time);\r\n    }\r\n    emit(evt, a1) {\r\n        if (!this._events[evt])\r\n            return;\r\n        const listeners = this._events[evt];\r\n        if (listeners.fn) {\r\n            if (listeners.once)\r\n                this.off(evt, listeners.fn, undefined, true);\r\n            listeners.fn.call(listeners.context, a1);\r\n        }\r\n        else {\r\n            const length = listeners.length;\r\n            for (let i = 0; i < length; i++) {\r\n                if (listeners[i].once)\r\n                    this.off(evt, listeners[i].fn, undefined, true);\r\n                listeners[i].fn.call(listeners[i].context, a1);\r\n            }\r\n        }\r\n    }\r\n    on(evt, fn, context, once = false) {\r\n        if (!isFunction(fn)) {\r\n            throw new TypeError('The listener must be a function');\r\n        }\r\n        const listener = new EE(fn, context || this, once);\r\n        // eslint-disable-next-line no-unused-expressions\r\n        if (!this._events[evt])\r\n            this._events[evt] = listener, this._eventsCount++;\r\n        else if (!this._events[evt].fn)\r\n            this._events[evt].push(listener);\r\n        else\r\n            this._events[evt] = [this._events[evt], listener];\r\n        return { destroy: this.off.bind(this, evt, fn) };\r\n    }\r\n    once(event, fn, context) {\r\n        return this.on(event, fn, context, true);\r\n    }\r\n    off(evt, fn, context, once) {\r\n        if (!evt) {\r\n            this._events = Object.create(null);\r\n            this._eventsCount = 0;\r\n            return this;\r\n        }\r\n        if (!this._events[evt])\r\n            return this;\r\n        if (!fn) {\r\n            this.clearEvent(evt);\r\n            return this;\r\n        }\r\n        const listeners = this._events[evt];\r\n        const events = [];\r\n        if (listeners.fn) {\r\n            if (listeners.fn === fn\r\n                && (!once || listeners.once)\r\n                && (!context || listeners.context === context)) {\r\n                this.clearEvent(evt);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0, length = listeners.length; i < length; i++) {\r\n                if (listeners[i].fn !== fn\r\n                    || (once && !listeners[i].once)\r\n                    || (context && listeners[i].context !== context)) {\r\n                    events.push(listeners[i]);\r\n                }\r\n            }\r\n            //\r\n            // Reset the array, or remove it completely if we have no more listeners.\r\n            //\r\n            if (events.length)\r\n                this._events[evt] = events.length === 1 ? events[0] : events;\r\n            else\r\n                this.clearEvent(evt);\r\n        }\r\n        return this;\r\n    }\r\n    clearEvent(evt) {\r\n        if (--this._eventsCount === 0)\r\n            this._events = Object.create(null);\r\n        else\r\n            delete this._events[evt];\r\n    }\r\n}\n\nexport { EventEmitter };\n","class Rect {\r\n    el;\r\n    rect;\r\n    constructor(el) {\r\n        this.el = el;\r\n        this.rect = {};\r\n    }\r\n    get width() {\r\n        this.tryUpdate(this.rect.width);\r\n        return this.rect.width;\r\n    }\r\n    get height() {\r\n        this.tryUpdate(this.rect.height);\r\n        return this.rect.height;\r\n    }\r\n    get x() {\r\n        this.tryUpdate(this.rect.left);\r\n        return this.rect.left;\r\n    }\r\n    get y() {\r\n        this.tryUpdate(this.rect.top);\r\n        return this.rect.top;\r\n    }\r\n    get bottom() {\r\n        return this.rect.bottom;\r\n    }\r\n    get right() {\r\n        return this.rect.right;\r\n    }\r\n    get changed() {\r\n        const newRect = this.el.getBoundingClientRect();\r\n        const ret = (newRect.top !== this.rect.top\r\n            || newRect.left !== this.rect.left\r\n            || newRect.width !== this.rect.width\r\n            || newRect.height !== this.rect.height);\r\n        if (ret)\r\n            this.rect = newRect;\r\n        return ret;\r\n    }\r\n    tryUpdate(v) {\r\n        if (!v)\r\n            this.update();\r\n    }\r\n    update = () => {\r\n        this.rect = this.el.getBoundingClientRect();\r\n    };\r\n    destroy() {\r\n        this.el = null;\r\n        this.rect = null;\r\n    }\r\n}\n\nexport { Rect };\n","import { removeNode, $ } from './dom.js';\nimport { isString } from './is.js';\nimport { destroy } from './destroyable.js';\nimport { EventEmitter } from './emitter.js';\n\nfunction getEl(container, desc, attrs, children, classPrefix) {\r\n    let el;\r\n    if (desc && !isString(desc)) {\r\n        el = desc;\r\n    }\r\n    else {\r\n        el = $(desc, attrs, children, classPrefix);\r\n    }\r\n    if (container)\r\n        container.appendChild(el);\r\n    return el;\r\n}\r\nclass Component {\r\n    el;\r\n    constructor(container, desc, attrs, children, classPrefix) {\r\n        this.el = getEl(container, desc, attrs, children, classPrefix);\r\n    }\r\n    destroy() {\r\n        removeNode(this.el);\r\n        destroy(this);\r\n    }\r\n}\r\nclass EventEmitterComponent extends EventEmitter {\r\n    el;\r\n    constructor(container, desc, attrs, children, classPrefix) {\r\n        super();\r\n        this.el = getEl(container, desc, attrs, children, classPrefix);\r\n    }\r\n    destroy() {\r\n        removeNode(this.el);\r\n        destroy(this);\r\n    }\r\n}\n\nexport { Component, EventEmitterComponent };\n","class Drag {\r\n    el;\r\n    start;\r\n    move;\r\n    end;\r\n    pending = false;\r\n    lastEv;\r\n    constructor(dom, start, move, end) {\r\n        this.el = dom;\r\n        this.start = start;\r\n        this.move = move;\r\n        this.end = end;\r\n        dom.addEventListener('pointerdown', this.downHandler, true);\r\n        dom.addEventListener('pointerup', this.upHandler, true);\r\n        dom.addEventListener('pointercancel', this.upHandler, true);\r\n    }\r\n    downHandler = (ev) => {\r\n        ev.preventDefault();\r\n        this.el.setPointerCapture(ev.pointerId);\r\n        this.el.addEventListener('pointermove', this.moveHandler, true);\r\n        this.start(ev);\r\n    };\r\n    moveHandler = (ev) => {\r\n        ev.preventDefault();\r\n        this.lastEv = ev;\r\n        if (this.pending)\r\n            return;\r\n        this.pending = true;\r\n        requestAnimationFrame(this.handlerMove);\r\n    };\r\n    handlerMove = () => {\r\n        this.move(this.lastEv);\r\n        this.pending = false;\r\n    };\r\n    upHandler = (ev) => {\r\n        ev.preventDefault();\r\n        this.el.releasePointerCapture(ev.pointerId);\r\n        this.el.removeEventListener('pointermove', this.moveHandler, true);\r\n        if (this.end)\r\n            this.end(ev);\r\n    };\r\n    destroy() {\r\n        if (!this.el)\r\n            return;\r\n        this.el.removeEventListener('pointerdown', this.downHandler, true);\r\n        this.el.removeEventListener('pointerup', this.upHandler, true);\r\n        this.el.removeEventListener('pointercancel', this.upHandler, true);\r\n        this.el.removeEventListener('pointermove', this.moveHandler, true);\r\n        this.start = null;\r\n        this.move = null;\r\n        this.end = null;\r\n        this.lastEv = null;\r\n        this.el = null;\r\n    }\r\n}\n\nexport { Drag };\n","function padStart(v, len = 2, str = '0') {\r\n    v = String(v);\r\n    if (v.length >= len)\r\n        return v;\r\n    for (let i = 0, l = len - v.length; i < l; i++) {\r\n        v = str + v;\r\n    }\r\n    return v;\r\n}\r\nfunction formatTime(seconds) {\r\n    // eslint-disable-next-line no-restricted-globals\r\n    if (!isFinite(seconds) || isNaN(seconds))\r\n        return '';\r\n    if (!seconds)\r\n        return '0:00';\r\n    const isNeg = seconds < 0;\r\n    if (isNeg)\r\n        seconds *= -1;\r\n    let ret;\r\n    seconds = Math.round(seconds);\r\n    if (seconds < 60) {\r\n        ret = `0:${padStart(seconds)}`;\r\n    }\r\n    else if (seconds < 3600) {\r\n        ret = `${~~(seconds / 60)}:${padStart(seconds % 60)}`;\r\n    }\r\n    else {\r\n        ret = `${~~(seconds / 3600)}:${padStart(~~((seconds % 3600) / 60))}:${padStart(seconds % 60)}`;\r\n    }\r\n    if (isNeg)\r\n        ret = `-${ret}`;\r\n    return ret;\r\n}\r\nfunction clamp(n, lower = 0, upper = 1) {\r\n    return Math.max(Math.min(n, upper), lower);\r\n}\n\nexport { clamp, formatTime };\n","function throttle(fn, ctx) {\r\n    let pending = false;\r\n    let first = true;\r\n    let args = null;\r\n    return function () {\r\n        args = arguments;\r\n        if (first) {\r\n            first = false;\r\n            return fn.apply(ctx, args);\r\n        }\r\n        if (pending)\r\n            return;\r\n        pending = true;\r\n        requestAnimationFrame(() => {\r\n            fn.apply(ctx, args);\r\n            pending = false;\r\n        });\r\n    };\r\n}\n\nexport { throttle };\n","import { Component, $ } from 'wblib';\n\nexport class Chapter extends Component {\n  private bufferedEl: HTMLElement;\n\n  private playedEl: HTMLElement;\n\n  private hoverEl: HTMLElement;\n\n  realEl: HTMLElement;\n\n  duration = 0;\n\n  constructor(\n    container: HTMLElement | DocumentFragment,\n    duration: number,\n    public start: number,\n    public end: number,\n    public title?: string,\n  ) {\n    super(container, '.ppbar_chapter_i');\n    const wrapEl = this.realEl = this.el.appendChild($('.ppbar_chapter_i_w'));\n    this.bufferedEl = wrapEl.appendChild($('.ppbar_chapter_i_b'));\n    this.hoverEl = wrapEl.appendChild($('.ppbar_chapter_i_h'));\n    this.playedEl = wrapEl.appendChild($('.ppbar_chapter_i_p'));\n    this.update(start, end, duration, title);\n  }\n\n  update(start: number, end: number, duration: number, title?: string) {\n    this.start = start;\n    this.end = end;\n    this.duration = end - start;\n    this.title = title || '';\n    this.updateFlex(duration);\n  }\n\n  updateFlex(duration: number) {\n    this.el.style.flex = String(Math.max(0, this.duration / duration));\n  }\n\n  match(time: number) {\n    return time >= this.start && time <= this.end;\n  }\n\n  updateHover(time: number) {\n    return this.setBar(time, this.hoverEl);\n  }\n\n  updateBuffer(time: number) {\n    return this.setBar(time, this.bufferedEl);\n  }\n\n  updatePlayed(time: number) {\n    return this.setBar(time, this.playedEl);\n  }\n\n  private setBar(time: number, dom: HTMLElement) {\n    const match = this.match(time);\n    dom.style.transform = `scaleX(${\n      match ? ((time - this.start) / this.duration) : time > this.end ? 1 : 0\n    })`;\n    return match;\n  }\n}\n","import {\n  Component, svgNS,\n} from 'wblib';\n\nlet heatId = 0;\n\nexport class HeatMap extends Component {\n  private pathEl: SVGPathElement;\n\n  constructor(\n    container: HTMLElement,\n    dots?: number[][],\n    max?: number,\n    flex?: string,\n  ) {\n    super(container, '.ppbar_heat_i');\n\n    const svg = document.createElementNS(svgNS, 'svg');\n    this.pathEl = document.createElementNS(svgNS, 'path');\n\n    const defs = document.createElementNS(svgNS, 'defs');\n    const clipPath = document.createElementNS(svgNS, 'clipPath');\n    const rect = document.createElementNS(svgNS, 'rect');\n\n    svg.setAttribute('viewBox', '0 0 1000 100');\n    svg.setAttribute('preserveAspectRatio', 'none');\n    svg.setAttribute('width', '100%');\n    clipPath.setAttribute('id', `ppb${heatId}`);\n    rect.setAttribute('clip-path', `url(#ppb${heatId})`);\n    rect.setAttribute('fill', 'white');\n    rect.setAttribute('fill-opacity', '0.2');\n    rect.setAttribute('width', '100%');\n    rect.setAttribute('height', '100%');\n    rect.setAttribute('x', '0');\n    rect.setAttribute('y', '0');\n\n    clipPath.appendChild(this.pathEl);\n    defs.appendChild(clipPath);\n    svg.appendChild(defs);\n    svg.appendChild(rect);\n\n    heatId++;\n\n    if (dots && max) {\n      this.update(dots, max, flex);\n    }\n\n    this.el.appendChild(svg);\n  }\n\n  update(dots: number[][], max: number, flex?: string) {\n    const path: string[] = ['M0 100'];\n    let prev = [0, 100];\n    let cur: number[] = [];\n    let next: number[] | undefined;\n    let dx1 = 0;\n    let dy1 = 0;\n    let dx2;\n    let dy2;\n\n    const getXY = (d?: number[]) => {\n      if (!d) return;\n      return [d[0], (1 - d[1] / max) * 100];\n    };\n\n    dots.forEach((d, i) => {\n      cur = next || getXY(d)!;\n      next = getXY(dots[i + 1]) || [1000, 100];\n\n      const m = this.slope(prev, next);\n      dx2 = (next[0] - cur[0]) * -0.3;\n      dy2 = dx2 * m * 0.6;\n\n      path.push(`C ${(prev[0] - dx1).toFixed(1)} ${(prev[1] - dy1).toFixed(1)}, ${\n        (cur[0] + dx2).toFixed(1)} ${(cur[1] + dy2).toFixed(1)}, ${\n        cur[0].toFixed(1)} ${cur[1].toFixed(1)}`);\n\n      dx1 = dx2;\n      dy1 = dy2;\n      prev = cur;\n    });\n\n    path.push(`C ${(cur[0] - dx1).toFixed(1)} ${(cur[1] - dy1).toFixed(1)}, 1000 100, 1000 100`);\n    this.pathEl.setAttributeNS(null, 'd', path.join(' '));\n    this.el.style.flex = flex || '1';\n  }\n\n  private slope(a: number[], b: number[]) {\n    return (b[1] - a[1]) / (b[0] - a[0]);\n  }\n}\n","import { Component, $, addDestroyableListener } from 'wblib';\nimport { EVENT } from './constants';\nimport { ProgressBar } from './progress-bar';\nimport { RequiredConfig } from './types';\n\nexport class Marker extends Component {\n  time: number;\n\n  title?: string;\n\n  private tipEl: HTMLElement;\n\n  constructor(prog: ProgressBar, container: HTMLElement, private cfg: RequiredConfig['markers'][0]) {\n    super(container, '.ppbar_marker_i');\n\n    this.tipEl = this.el.appendChild($('.ppbar_marker_i_tip'));\n    if (cfg.title) {\n      this.title = cfg.title;\n      this.tipEl.textContent = cfg.title;\n    }\n\n    this.el.appendChild($('.ppbar_marker_i_d'));\n\n    if (cfg.image) {\n      const img = new Image(cfg.size?.[0], cfg.size?.[1]);\n      img.src = cfg.image;\n      this.el.appendChild(img);\n    } else if (cfg.el) {\n      if (cfg.size && cfg.size.length > 1) {\n        cfg.el.style.width = `${cfg.size[0]}px`;\n        cfg.el.style.height = `${cfg.size[1]}px`;\n      }\n      this.el.appendChild(cfg.el);\n    }\n\n    addDestroyableListener(this, this.el, 'click', () => {\n      prog.emit(EVENT.MARKER_CLICK, this.cfg);\n    });\n\n    this.time = cfg.time;\n    this.update(prog.duration);\n  }\n\n  update(duration: number) {\n    if (duration) {\n      if (this.time < 0) {\n        this.el.style.right = `${-this.time / duration * 100}%`;\n      } else {\n        this.el.style.left = `${this.time / duration * 100}%`;\n      }\n    }\n  }\n}\n","import {\n  Component, formatTime, clamp, Rect, $, addDestroyable,\n} from 'wblib';\nimport { ProgressBar } from './progress-bar';\nimport { ProgressConfig, RequiredConfig } from './types';\n\nexport class Thumbnail extends Component {\n  private opts: Required<RequiredConfig['thumbnail']> = {\n    start: 0,\n    gap: 10,\n    col: 5,\n    row: 5,\n    width: 160,\n    height: 90,\n    images: [],\n  };\n\n  private imgEl: HTMLElement;\n\n  private timeEl: HTMLElement;\n\n  private titleEl: HTMLElement;\n\n  private rect: Rect;\n\n  private thumbImgPrePic?: number;\n\n  private ssGapRatio?: number;\n\n  constructor(\n    container: HTMLElement,\n    private prog: ProgressBar,\n  ) {\n    super(container, '.ppbar_thumb');\n\n    this.imgEl = this.el.appendChild($('.ppbar_thumb_img'));\n    this.titleEl = this.el.appendChild($('.ppbar_thumb_title'));\n    this.timeEl = this.el.appendChild($('.ppbar_thumb_time'));\n    this.rect = addDestroyable(this, new Rect(this.el));\n\n    this.updateOptions(this.prog.config.thumbnail);\n  }\n\n  updateOptions(cfg: ProgressConfig['thumbnail']) {\n    const opts = Object.assign(this.opts, cfg);\n\n    if (opts.images.length) {\n      this.imgEl.style.display = 'block';\n      this.titleEl.style.width = this.imgEl.style.width = `${opts.width}px`;\n      this.imgEl.style.height = `${opts.height}px`;\n      this.thumbImgPrePic = opts.col * opts.row;\n      this.ssGapRatio = opts.start / opts.gap;\n    } else {\n      this.imgEl.style.display = 'none';\n    }\n    this.rect.update();\n  }\n\n  update(time: number, x: number, maxX: number) {\n    if (this.opts.images.length) {\n      const thumb = this.getCurrentThumb(time);\n      if (thumb) {\n        this.imgEl.style.backgroundImage = `url(${thumb.url})`;\n        this.imgEl.style.backgroundPosition = `-${thumb.x}px -${thumb.y}px`;\n      }\n    } else {\n      this.rect.update();\n    }\n\n    const live = this.prog.live;\n    this.timeEl.textContent = `${live ? '-' : ''}${formatTime(live ? this.prog.duration - time : time)}`;\n\n    const { markers, chapters } = this.prog;\n    let title;\n    if (markers.length) {\n      for (let i = 0, l = markers.length, item; i < l; i++) {\n        item = markers[i];\n        if (time >= item.time && time < (item.time + 2)) {\n          title = item.title;\n          break;\n        }\n      }\n    }\n    if (!title && chapters.length) {\n      for (let i = 0, l = chapters.length, item; i < l; i++) {\n        item = chapters[i];\n        if (time >= item.start && time <= item.end) {\n          title = item.title;\n          break;\n        }\n      }\n    }\n\n    this.titleEl.textContent = title || '';\n    const half = this.rect.width / 2;\n    this.el.style.left = `${clamp(x - half, 0, Math.max(0, maxX - 2 * half))}px`;\n  }\n\n  private getCurrentThumb(time: number) {\n    const i = Math.max(time / this.opts.gap - this.ssGapRatio!, 0) | 0;\n    const url = this.opts.images[(i / this.thumbImgPrePic!) | 0];\n    if (!url) return;\n    const x = (i % this.opts.col) * this.opts.width;\n    const y = ~~((i % this.thumbImgPrePic!) / this.opts.row) * this.opts.height;\n    return { url, x, y };\n  }\n}\n","import {\n  $, addDestroyable, addDestroyableListener, Rect, throttle, Drag, isNumber, isValidNumber, clamp, isString,\n  EventEmitterComponent,\n  toggleClass,\n} from 'wblib';\nimport { Chapter } from './chapter';\nimport { EVENT } from './constants';\nimport { HeatMap } from './heat-map';\nimport { Marker } from './marker';\nimport { Thumbnail } from './thumbnail';\nimport { ProgressEventType, ProgressConfig, RequiredConfig } from './types';\n\nexport class ProgressBar extends EventEmitterComponent<ProgressEventType> {\n  config: ProgressConfig;\n\n  rect: Rect;\n\n  duration = 0;\n\n  rotate = 0;\n\n  live = false;\n\n  chapters: Chapter[] = [];\n\n  markers: Marker[] = [];\n\n  headMaps: HeatMap[] = [];\n\n  thumbnail: Thumbnail;\n\n  private curChapter = 0;\n\n  private prevActiveHeat?: HTMLElement;\n\n  private prevActiveChapter?: HTMLElement;\n\n  private dragging = false;\n\n  private chapterEl: HTMLElement;\n\n  private markerEl: HTMLElement;\n\n  private heatEl: HTMLElement;\n\n  private dotEl: HTMLElement;\n\n  constructor(container?: HTMLElement | DocumentFragment, config?: ProgressConfig) {\n    super(container, '.ppbar');\n    this.config = { ...config };\n    const { duration, live, rotate } = this.config;\n    this.rotate = rotate || 0;\n    this.updateDuration(duration);\n    this.live = live!;\n\n    this.heatEl = this.el.appendChild($('.ppbar_heat'));\n    this.chapterEl = this.el.appendChild($('.ppbar_chapter'));\n    this.markerEl = this.el.appendChild($('.ppbar_marker'));\n    this.dotEl = this.el.appendChild($('.ppbar_dot'));\n    this.updateDot();\n    this.updateHoverClass();\n\n    this.rect = addDestroyable(this, new Rect(this.el));\n    addDestroyable(this, new Drag(this.chapterEl, this.onDragStart, this.onDragging, (ev: MouseEvent) => {\n      this.dragging = false;\n      this.emit(EVENT.DRAGEND, this.getCurrentTime(this.getLeft(ev)));\n    }));\n    addDestroyableListener(this, this.el, 'mousemove', throttle((ev: MouseEvent) => this.onMousemove(ev)), true);\n    addDestroyableListener(this, this.el, 'mouseleave', throttle(this.onMouseleave), false);\n\n    this.setChapters();\n    this.setMarkers();\n    this.setHeatMaps();\n\n    this.thumbnail = addDestroyable(this, new Thumbnail(this.el, this));\n\n    if (this.live) this.updatePlayed(this.duration);\n\n    if ((window as any).ResizeObserver) {\n      const ro = new ResizeObserver(throttle(() => this.updateSize()));\n      ro.observe(this.el);\n      addDestroyable(this, { destroy: () => ro.disconnect() });\n    }\n  }\n\n  updateSize() {\n    this.rect.update();\n  }\n\n  updateRotate(r: RequiredConfig['rotate']) {\n    this.rotate = r;\n    setTimeout(() => this.updateSize());\n  }\n\n  updateDuration(duration?: number) {\n    this.duration = duration || 0;\n    if (!isValidNumber(this.duration)) this.duration = 0;\n    if (this.duration) {\n      this.updateMarkerPosition(0);\n      this.chapters.forEach((c) => c.updateFlex(this.duration));\n      this.updateCurrentHeatMap();\n    }\n  }\n\n  updateConfig(config?: Partial<ProgressConfig>) {\n    if (!config) return;\n    Object.assign(this.config, config);\n    this.live = this.config.live!;\n    if (config.duration) this.duration = config.duration;\n    if (config.dot) this.updateDot();\n    if (config.chapters) this.updateChapters(config.chapters);\n    if (config.markers) this.updateMarkers();\n    if (config.heatMap) this.updateHeatMap(config.heatMap);\n    if (config.thumbnail) this.thumbnail.updateOptions(config.thumbnail);\n    if (this.live) this.updatePlayed(this.duration);\n    if (config.rotate != null) this.rotate = config.rotate;\n    this.updateSize();\n  }\n\n  updateMarkerPosition(relativeTime: number) {\n    this.markers.forEach((m) => {\n      m.time += relativeTime;\n      m.update(this.duration);\n    });\n  }\n\n  updatePlayed(time: number, isDrag?: boolean) {\n    if ((this.dragging && !isDrag) || !this.duration) return;\n    this.chapters.forEach((c, i) => {\n      if (c.updatePlayed(time)) this.curChapter = i;\n    });\n\n    this.dotEl.style.left = `${time / this.duration * 100}%`;\n  }\n\n  updateBuffer(time: number) {\n    this.chapters.forEach((c) => c.updateBuffer(time));\n  }\n\n  updateHover(time: number, left?: number) {\n    let matched = false;\n    const gt1 = this.chapters.length > 1;\n    this.chapters.forEach((c, i) => {\n      if (c.updateHover(time) && gt1) {\n        const h = this.headMaps[i];\n        if (h) {\n          if (this.prevActiveHeat) this.prevActiveHeat.style.transform = '';\n          h.el.style.transform = 'translateY(-2px)';\n          this.prevActiveHeat = h.el;\n        }\n        if (this.prevActiveChapter) this.prevActiveChapter.style.transform = '';\n        c.realEl.style.transform = 'scaleY(2.5)';\n        this.prevActiveChapter = c.realEl;\n        if (this.curChapter === i) {\n          this.dotEl.style.transform = 'scale(1.2) translateY(-50%)';\n          matched = true;\n        }\n      }\n    });\n    if (gt1 && !matched) this.dotEl.style.transform = 'translateY(-50%)';\n    if (left == null) left = time / this.duration * this.getWidth();\n    this.thumbnail.update(time, left, this.getWidth());\n  }\n\n  private updateDot() {\n    const { dot } = this.config;\n    this.dotEl.innerHTML = '';\n    if (dot && dot !== true) {\n      if (isString(dot)) {\n        this.dotEl.innerHTML = dot;\n      } else {\n        this.dotEl.appendChild(dot);\n      }\n    } else {\n      this.dotEl.appendChild($('.ppbar_dot_i'));\n    }\n  }\n\n  private updateChapters(chapters: RequiredConfig['chapters']) {\n    const cLen = this.chapters.length;\n    const duration = this.duration;\n    if (chapters.length) {\n      const maxLen = Math.max(chapters.length, cLen);\n      let prev = 0;\n      let old;\n      let cur;\n      for (let i = 0; i < maxLen; i++) {\n        old = this.chapters[i];\n        cur = chapters[i];\n        if (old && cur) {\n          old.update(prev, cur.time || duration, duration, cur.title);\n        } else if (old) {\n          old.destroy();\n          this.chapters[i] = undefined as any;\n        } else {\n          this.chapters[i] = new Chapter(this.chapterEl, duration, prev, cur.time || duration, cur.title);\n        }\n        if (cur) prev = cur.time || duration;\n      }\n    } else {\n      const c = this.chapters[0];\n      c.update(0, duration, duration);\n      for (let i = 1; i < cLen; i++) {\n        this.chapters[i].destroy();\n        this.chapters[i] = undefined as any;\n      }\n    }\n\n    this.chapters = this.chapters.filter(Boolean);\n  }\n\n  private updateMarkers() {\n    this.markers.forEach((m) => m.destroy());\n    this.markers = [];\n    this.setMarkers();\n  }\n\n  private updateHoverClass() {\n    const { heatMap } = this.config;\n    if (heatMap) toggleClass(this.heatEl, 'ppbar_heat-hover', !!heatMap.hoverShow);\n  }\n\n  private updateHeatMap(heatMap: RequiredConfig['heatMap']) {\n    this.updateHoverClass();\n    const points = heatMap.points;\n    if (!points || !points.length) {\n      this.headMaps.forEach((x) => x.destroy());\n      this.headMaps = [];\n      return;\n    }\n\n    const ret = this.getHeatItems();\n    if (ret) {\n      const l = Math.max(this.headMaps.length, ret.items.length);\n      let old;\n      let cur;\n      for (let i = 0; i < l; i++) {\n        old = this.headMaps[i];\n        cur = ret.items[i];\n        if (old && cur) {\n          old.update(cur, ret.max, ret.flexes[i]);\n        } else if (old) {\n          old.destroy();\n          this.headMaps[i] = undefined as any;\n        } else {\n          this.headMaps[i] = new HeatMap(this.heatEl, cur, ret.max, ret.flexes[i]);\n        }\n      }\n    } else {\n      const l = Math.max(this.chapters.length, this.headMaps.length);\n      for (let i = 0; i < l; i++) {\n        if (!this.chapters[i]) {\n          this.headMaps[i].destroy();\n          this.headMaps[i] = undefined as any;\n        } else if (!this.headMaps[i]) {\n          this.headMaps[i] = new HeatMap(this.heatEl);\n        }\n      }\n    }\n  }\n\n  private updateCurrentHeatMap() {\n    if (this.headMaps.length < 2) return;\n    const ret = this.getHeatItems();\n    if (ret) {\n      ret.items.forEach((x, i) => {\n        this.headMaps[i]?.update(x, ret.max, ret.flexes[i]);\n      });\n    }\n  }\n\n  private setChapters() {\n    let duration = this.duration;\n    const chapters = this.config.chapters;\n\n    if (chapters && chapters.length) {\n      duration = chapters[chapters.length - 1].time || duration;\n      if (!duration) return;\n      const frag = document.createDocumentFragment();\n\n      let prev = 0;\n      chapters.forEach((c, i) => {\n        this.chapters[i] = new Chapter(frag, duration, prev, c.time || duration, c.title);\n        prev = c.time || 0;\n      });\n\n      this.chapterEl.appendChild(frag);\n    } else {\n      this.chapters[0] = new Chapter(this.chapterEl, duration, 0, duration);\n    }\n  }\n\n  private setMarkers() {\n    const makers = this.config.markers;\n    if (makers && makers.length) {\n      makers.forEach((m, i) => {\n        this.markers[i] = new Marker(this, this.markerEl, m);\n      });\n    }\n  }\n\n  private setHeatMaps() {\n    const heatMap = this.config.heatMap;\n    if (!heatMap) return;\n    const pointLen = heatMap.points?.length;\n    if (!pointLen || pointLen < 2) return;\n    const duration = this.duration;\n\n    if (!duration) {\n      this.chapters.forEach((_, i) => {\n        this.headMaps[i] = new HeatMap(this.heatEl);\n      });\n      return;\n    }\n\n    const ret = this.getHeatItems();\n    if (ret) {\n      ret.items.forEach((x, i) => {\n        this.headMaps[i] = new HeatMap(this.heatEl, x, ret.max, ret.flexes[i]);\n      });\n    }\n  }\n\n  private getHeatItems() {\n    const duration = this.duration;\n    const heatMap = this.config.heatMap;\n    if (!duration || !heatMap) return;\n    const points = heatMap.points as {score: number; duration: number}[];\n    const pointLen = points.length;\n    if (!pointLen || pointLen < 2) return;\n    const defaultDuration = heatMap?.defaultDuration as number;\n    const chapters = this.chapters;\n    const hasChapter = chapters.length > 1;\n    const items: number[][][] = [[]];\n\n    let curChapter = 0;\n    let curItem;\n    let point;\n    let rDur;\n    let max = 0;\n    let total = 0;\n    let curDuration = 0;\n    let curLen = 0;\n    let totalX = 0;\n    let x = 0;\n    let end;\n    for (let i = 0; i < pointLen; i++) {\n      point = points[i];\n      if (isNumber(point)) {\n        point = points[i] = { score: point, duration: defaultDuration };\n      } else {\n        point.duration = point.duration || defaultDuration;\n      }\n      if ((points[i] as any).duration == null) {\n        // eslint-disable-next-line no-console\n        console.error(`ppbar heatMap.points[${i}].duration is undefined`);\n        return;\n      }\n      if (points[i].score > max) max = points[i].score;\n\n      curDuration = hasChapter ? chapters[curChapter].duration : duration;\n\n      curLen = point.duration / curDuration * 1000;\n      x = totalX + curLen / 2;\n      totalX += curLen;\n\n      if (hasChapter) {\n        total += point.duration;\n        curItem = items[curChapter];\n        end = chapters[curChapter].end;\n        if (total > end) {\n          if (chapters[curChapter + 1]) {\n            rDur = total - end;\n            curItem.push([1000, point.score]);\n            items[++curChapter] = [[0, point.score]];\n            totalX = rDur / chapters[curChapter].duration * 1000;\n          } else {\n            curItem.push([1000, point.score]);\n          }\n        } else {\n          curItem.push([x, point.score]);\n        }\n      } else {\n        items[0].push([x, point.score]);\n      }\n    }\n\n    return {\n      items,\n      flexes: items.map((_, i) => (hasChapter ? chapters[i].el.style.flex : undefined)),\n      max,\n    };\n  }\n\n  private onMousemove(ev: MouseEvent) {\n    const l = this.getLeft(ev);\n    const t = this.getCurrentTime(l);\n    this.updateHover(t, l);\n    this.emit(EVENT.MOUSEMOVE, t);\n  }\n\n  private onMouseleave = () => {\n    this.emit(EVENT.MOUSELEAVE);\n    setTimeout(() => {\n      if (this.prevActiveChapter) {\n        this.prevActiveChapter.style.transform = '';\n        this.prevActiveChapter = undefined;\n      }\n      if (this.prevActiveHeat) {\n        this.prevActiveHeat.style.transform = '';\n        this.prevActiveHeat = undefined;\n      }\n    });\n  };\n\n  private onDragStart = (ev: MouseEvent) => {\n    this.dragging = true;\n    this.updateSize();\n    this.onDragging(ev);\n  };\n\n  private onDragging = (ev: MouseEvent) => {\n    const l = this.getLeft(ev);\n    const t = this.getCurrentTime(l);\n    this.updatePlayed(t, true);\n    this.updateHover(t, l);\n    this.emit(EVENT.DRAGGING, t);\n  };\n\n  private getCurrentTime(left: number): number {\n    return clamp((left / this.getWidth())) * this.duration;\n  }\n\n  private getLeft(ev: MouseEvent) {\n    if (!this.rotate) return ev.clientX - this.rect.x;\n    if (this.rotate === 90) return ev.clientY - this.rect.y;\n    return this.rect.bottom - ev.clientY;\n  }\n\n  private getWidth() {\n    if (this.rotate) return this.rect.height;\n    return this.rect.width;\n  }\n}\n\nexport function createBar(container?: HTMLElement | DocumentFragment, config?: ProgressConfig) {\n  return new ProgressBar(container, config);\n}\n","export default \"__VITE_ASSET__5e10f6e3__\"","export default \"__VITE_ASSET__df4d84ec__\"","export default \"__VITE_ASSET__3c59fef5__\"","import ProgressBar from '../src'\nimport m1 from './m1.png'\nimport m2 from './m2.png'\nimport m3 from './m3.png'\nimport t1 from './t1.jpg'\nimport t2 from './t2.jpg'\nimport t3 from './t3.jpg'\n\nconst p = document.getElementById('c')\nconst buffer = document.getElementById('buffer')\nconst rotate = document.getElementById('rotate')\nconst live = document.getElementById('live')\nconst youtube = document.getElementById('youtube')\nconst bilibili = document.getElementById('bilibili')\n\nconst cfg = {\n  dot: true,\n  duration: 600,\n  live: false,\n  chapters: [\n    { time: 100, title: 'chapter-a' },\n    { time: 280, title: 'chapter-b' },\n    { time: 510, title: 'chapter-c' },\n    { title: 'chapter-d' },\n  ],\n  markers: [{\n    time: 150,\n    title: 'title1',\n    image: m1,\n    size: [32, 34],\n  }, {\n    time: 300,\n    title: 'title2',\n    image: m2,\n    size: [32, 34],\n  },\n  {\n    time: 550, title: 'title3', image: m3, size: [32, 34],\n  }],\n  heatMap: {\n    points: getHeatPoints(),\n    defaultDuration: 7.5\n  },\n  thumbnail: {\n    images: [t1,t2,t3]\n  }\n}\nconst ytbCfg = {\n  dot: true,\n  chapters: [\n    { time: 100, title: 'chapter-a' },\n    { time: 280, title: 'chapter-b' },\n    { time: 510, title: 'chapter-c' },\n    { title: 'chapter-d' },\n  ],\n  markers: [],\n  heatMap: {\n    points: getHeatPoints(),\n    hoverShow: true,\n    defaultDuration: 7.5\n  }\n}\nconst bCfg = {\n  dot: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 18 18\" width=\"18\" height=\"18\" preserveAspectRatio=\"xMidYMid meet\"><defs><clipPath id=\"__lottie_element_25\"><rect width=\"18\" height=\"18\" x=\"0\" y=\"0\"></rect></clipPath></defs><g clip-path=\"url(#__lottie_element_25)\"><g transform=\"matrix(1,0,0,1,8.937000274658203,8.25)\" opacity=\"0.14\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,0.07500000298023224,1.2130000591278076)\"><path fill=\"rgb(251,114,153)\" fill-opacity=\"1\" d=\" M9,-3.5 C9,-3.5 9,3.5 9,3.5 C9,5.707600116729736 7.207600116729736,7.5 5,7.5 C5,7.5 -5,7.5 -5,7.5 C-7.207600116729736,7.5 -9,5.707600116729736 -9,3.5 C-9,3.5 -9,-3.5 -9,-3.5 C-9,-5.707600116729736 -7.207600116729736,-7.5 -5,-7.5 C-5,-7.5 5,-7.5 5,-7.5 C7.207600116729736,-7.5 9,-5.707600116729736 9,-3.5z\"></path></g></g><g transform=\"matrix(1,0,0,1,9.140999794006348,8.67199993133545)\" opacity=\"0.28\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,-0.1509999930858612,0.7990000247955322)\"><path fill=\"rgb(251,114,153)\" fill-opacity=\"1\" d=\" M8,-3 C8,-3 8,3 8,3 C8,4.931650161743164 6.431650161743164,6.5 4.5,6.5 C4.5,6.5 -4.5,6.5 -4.5,6.5 C-6.431650161743164,6.5 -8,4.931650161743164 -8,3 C-8,3 -8,-3 -8,-3 C-8,-4.931650161743164 -6.431650161743164,-6.5 -4.5,-6.5 C-4.5,-6.5 4.5,-6.5 4.5,-6.5 C6.431650161743164,-6.5 8,-4.931650161743164 8,-3z\"></path></g></g><g transform=\"matrix(0.9883429408073425,-0.7275781631469727,0.6775955557823181,0.920446515083313,7.3224687576293945,-0.7606706619262695)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(0.9937776327133179,-0.11138220876455307,0.11138220876455307,0.9937776327133179,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z\"></path></g></g><g transform=\"matrix(1.1436611413955688,0.7535901665687561,-0.6317168474197388,0.9587040543556213,16.0070743560791,2.902894973754883)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(0.992861807346344,0.1192704513669014,-0.1192704513669014,0.992861807346344,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.75,-1.25 C0.75,-1.25 0.75,1.25 0.75,1.25 C0.75,1.663925051689148 0.4139249920845032,2 0,2 C0,2 0,2 0,2 C-0.4139249920845032,2 -0.75,1.663925051689148 -0.75,1.25 C-0.75,1.25 -0.75,-1.25 -0.75,-1.25 C-0.75,-1.663925051689148 -0.4139249920845032,-2 0,-2 C0,-2 0,-2 0,-2 C0.4139249920845032,-2 0.75,-1.663925051689148 0.75,-1.25z\"></path></g></g><g transform=\"matrix(1,0,0,1,8.890999794006348,8.406000137329102)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,0.09099999815225601,1.1009999513626099)\"><path fill=\"rgb(255,255,255)\" fill-opacity=\"1\" d=\" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z\"></path><path stroke-linecap=\"butt\" stroke-linejoin=\"miter\" fill-opacity=\"0\" stroke-miterlimit=\"4\" stroke=\"rgb(0,0,0)\" stroke-opacity=\"1\" stroke-width=\"1.5\" d=\" M7,-3 C7,-3 7,3 7,3 C7,4.379749774932861 5.879749774932861,5.5 4.5,5.5 C4.5,5.5 -4.5,5.5 -4.5,5.5 C-5.879749774932861,5.5 -7,4.379749774932861 -7,3 C-7,3 -7,-3 -7,-3 C-7,-4.379749774932861 -5.879749774932861,-5.5 -4.5,-5.5 C-4.5,-5.5 4.5,-5.5 4.5,-5.5 C5.879749774932861,-5.5 7,-4.379749774932861 7,-3z\"></path></g></g><g transform=\"matrix(1,0,0,1,8.89900016784668,8.083999633789062)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.875,-1.125 C0.875,-1.125 0.875,1.125 0.875,1.125 C0.875,1.607912540435791 0.48291251063346863,2 0,2 C0,2 0,2 0,2 C-0.48291251063346863,2 -0.875,1.607912540435791 -0.875,1.125 C-0.875,1.125 -0.875,-1.125 -0.875,-1.125 C-0.875,-1.607912540435791 -0.48291251063346863,-2 0,-2 C0,-2 0,-2 0,-2 C0.48291251063346863,-2 0.875,-1.607912540435791 0.875,-1.125z\"></path></g></g><g transform=\"matrix(1,0,0,1,14.008999824523926,8.083999633789062)\" opacity=\"1\" style=\"display: block;\"><g opacity=\"1\" transform=\"matrix(1,0,0,1,-2.5239999294281006,1.3849999904632568)\"><path fill=\"rgb(0,0,0)\" fill-opacity=\"1\" d=\" M0.8999999761581421,-1.100000023841858 C0.8999999761581421,-1.100000023841858 0.8999999761581421,1.100000023841858 0.8999999761581421,1.100000023841858 C0.8999999761581421,1.596709966659546 0.4967099726200104,2 0,2 C0,2 0,2 0,2 C-0.4967099726200104,2 -0.8999999761581421,1.596709966659546 -0.8999999761581421,1.100000023841858 C-0.8999999761581421,1.100000023841858 -0.8999999761581421,-1.100000023841858 -0.8999999761581421,-1.100000023841858 C-0.8999999761581421,-1.596709966659546 -0.4967099726200104,-2 0,-2 C0,-2 0,-2 0,-2 C0.4967099726200104,-2 0.8999999761581421,-1.596709966659546 0.8999999761581421,-1.100000023841858z\"></path></g></g></g></svg>`,\n  chapters: [],\n  markers: [{\n    time: 150,\n    title: 'title1',\n    image: m1,\n    size: [32, 34],\n  }, {\n    time: 300,\n    title: 'title2',\n    image: m2,\n    size: [32, 34],\n  },\n  {\n    time: 550, title: 'title3', image: m3, size: [32, 34],\n  }],\n  heatMap: {\n    points: getHeatPoints(),\n    defaultDuration: 7.5\n  }\n}\n\n\nconst pb = new ProgressBar(p, cfg)\n\npb.updateBuffer(6 * buffer.value)\nbuffer.onchange = function() {\n  pb.updateBuffer(6 * buffer.value)\n}\n\npb.on('markerClick', function (m) {\n  pb.updatePlayed(m.time)\n})\n\nrotate.onchange = function() {\n  const v = rotate.value ? Number(rotate.value) : 0\n  if (v === 90) {\n    pb.updateRotate(90)\n    p.style.width = '300px'\n    p.style.transform = 'rotate(90deg)'\n  } else if (v === -90) {\n    pb.updateRotate(-90)\n    p.style.width = '300px'\n    p.style.transform = 'rotate(-90deg)'\n  } else {\n    pb.updateRotate(0)\n    p.style.width = ''\n    p.style.transform = ''\n  }\n}\n\nlive.onchange = function() {\n  pb.updateConfig({\n    live: !!live.checked\n  })\n}\n\nyoutube.onchange = function() {\n  if (youtube.checked) {\n    if (bilibili.checked) bilibili.checked = false\n    pb.updateConfig(ytbCfg)\n  } else {\n    pb.updateConfig(cfg)\n  }\n  pb.el.style.setProperty('--primary-color', '#f00');\n  pb.updatePlayed(0)\n  pb.updateBuffer(6 * buffer.value)\n}\n\nbilibili.onchange = function() {\n  if (bilibili.checked) {\n    if (youtube.checked) youtube.checked = false\n    pb.updateConfig(bCfg)\n    pb.el.style.setProperty('--primary-color', 'rgba(35,173,229, 1)');\n\n  } else {\n    pb.updateConfig(cfg)\n    pb.el.style.setProperty('--primary-color', '#f00');\n  }\n  pb.updatePlayed(0)\n  pb.updateBuffer(6 * buffer.value)\n}\n\nfunction getHeatPoints() {\n  return [\n    9592,\n    9692,\n    10063,\n    41138,\n    30485,\n    23905,\n    10966.5,\n    10316.5,\n    8533.5,\n    7249,\n    7181,\n    6813,\n    5929,\n    18046.5,\n    8817,\n    3684.5,\n    4863.5,\n    7818,\n    11122,\n    11977.5,\n    12045.5,\n    6882,\n    8616,\n    3389.5,\n    2791.5,\n    2378,\n    2415,\n    3561.5,\n    4563.5,\n    5351,\n    5166,\n    3649.5,\n    3817.5,\n    6808,\n    3503,\n    2831.5,\n    2617.5,\n    2401,\n    2149,\n    2478.5,\n    2498.5,\n    2311.5,\n    1843.5,\n    1800,\n    2101,\n    2002.5,\n    2882.5,\n    3380,\n    3880,\n    3966,\n    3257,\n    8804,\n    5440,\n    6468,\n    6432,\n    3885,\n    3611,\n    7348,\n    11954,\n    12317,\n    5834,\n    1549.5,\n    1658.5,\n    1649,\n    2053,\n    3831.5,\n    6050.5,\n    7764,\n    8290,\n    8549,\n    5757,\n    1898,\n    1393,\n    1263.5,\n    1356.5,\n    2841,\n    5774,\n    4294,\n    1798,\n    1260.5,\n  ];\n}\n","export default \"__VITE_ASSET__3b083484__\"","export default \"__VITE_ASSET__b7afa5ab__\"","export default \"__VITE_ASSET__4b7b4485__\""],"names":["EVENT","isBrowser","window","toString","Object","prototype","o","String","isFunction","call","thirdOptsSupported","options","defineProperty","get","addEventListener","e","DomListener","node","type","handler","_classCallCheck","this","_defineProperty","removeEventListener","destroyableMap","Map","addDestroyable","key","destroyable","has","set","push","_destroy","forEach","item","destroy","delete","addDestroyableListener","el","listener","domListener","SELECTOR_REGEX","$","desc","attrs","children","classPrefix","arguments","length","undefined","match","exec","document","createElement","id","className","replace","trim","keys","name","value","test","setAttribute","isString","innerHTML","c","appendChild","removeNode","remove","parentNode","removeChild","svgNS","EE","_createClass","fn","context","once","create","Rect","evt","a1","_this","setTimeout","emit","time","_events","listeners","off","i","TypeError","_eventsCount","bind","event","on","clearEvent","events","_this2","rect","getBoundingClientRect","tryUpdate","width","height","left","top","bottom","right","newRect","ret","v","update","getEl","container","Component","EventEmitterComponent","_this3","_assertThisInitialized","EventEmitter","dom","start","move","end","_this4","Drag","ev","preventDefault","setPointerCapture","pointerId","moveHandler","lastEv","pending","requestAnimationFrame","handlerMove","releasePointerCapture","downHandler","upHandler","len","l","str","clamp","n","lower","upper","Math","max","min","ctx","first","args","apply","_Component","_inherits","Chapter","_super2","_createSuper","duration","title","_this5","wrapEl","realEl","bufferedEl","hoverEl","playedEl","updateFlex","style","flex","setBar","transform","concat","_Component2","HeatMap","_super3","dots","_this6","svg","createElementNS","pathEl","defs","clipPath","heatId","next","dy2","_this7","path","dx1","dy1","getXY","d","cur","m","slope","prev","dx2","toFixed","setAttributeNS","join","a","b","_Component3","Marker","_super4","prog","cfg","_this8","tipEl","textContent","image","_cfg$size","_cfg$size2","size","img","src","Thumbnail","_this9","_super5","opts","gap","col","row","images","imgEl","titleEl","timeEl","updateOptions","config","thumbnail","assign","display","thumbImgPrePic","ssGapRatio","x","maxX","getCurrentThumb","thumb","backgroundImage","url","backgroundPosition","y","live","seconds","isFinite","isNaN","isNeg","round","padStart","formatTime","_this$prog","markers","chapters","_i","half","_EventEmitterComponen","ProgressBar","_super6","_this10","rotate","headMaps","curChapter","dragging","onMouseleave","prevActiveChapter","prevActiveHeat","onDragStart","updateSize","onDragging","getLeft","t","getCurrentTime","updatePlayed","updateHover","_objectSpread","_this10$config","updateDuration","heatEl","chapterEl","markerEl","dotEl","updateDot","updateHoverClass","throttle","onMousemove","setChapters","setMarkers","setHeatMaps","ResizeObserver","ro","observe","disconnect","r","_this11","_this12","isNumber","updateMarkerPosition","updateCurrentHeatMap","dot","updateChapters","updateMarkers","heatMap","updateHeatMap","relativeTime","_this13","isDrag","_this14","updateBuffer","matched","gt1","_this15","h","getWidth","cLen","old","maxLen","_i2","filter","Boolean","cls","force","classList","add","toggle","toggleClass","hoverShow","points","getHeatItems","items","flexes","_l2","_i3","_this16","_this16$headMaps$i","_this17","createDocumentFragment","frag","makers","_this18","_heatMap$points","_this19","pointLen","_","curItem","point","defaultDuration","hasChapter","curDuration","curLen","totalX","score","console","error","total","rDur","map","clientY","clientX","m1","m2","m3","p","getElementById","ytbCfg","pb","buffer","onchange","Number","updateRotate","updateConfig","checked","youtube","bilibili","setProperty","bCfg"],"mappings":"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,EAAS1M,SAASiT,eAAe,UAC7BxH,EAAGzL,SAASiT,eAAe,UACrBjT,SAASiT,eAAe,aACvBjT,SAASiT,eAAe,YAEnC5J,EAAM,CACV4F,KAAK,EACL3I,SAAU,IACVmF,MAAM,EACNU,SAAU,CACR,CAAEnK,KAAM,IAAKuE,MAAO,aACpB,CAAEvE,KAAM,IAAKuE,MAAO,aACpB,CAAEvE,KAAM,IAAKuE,MAAO,aACpB,CAAEA,MAAO,cAEX2F,QAAS,CAAC,CACRlK,KAAM,IACNuE,MAAO,SACPkD,MAAOoJ,EACPjJ,KAAM,CAAC,GAAI,KACV,CACD5H,KAAM,IACNuE,MAAO,SACPkD,MAAOqJ,EACPlJ,KAAM,CAAC,GAAI,KAEb,CACE5H,KAAM,IAAKuE,MAAO,SAAUkD,MAAOsJ,EAAInJ,KAAM,CAAC,GAAI,MAEpDwF,QAAS,CACPyB,OA2GK,CACL,KACA,KACA,MACA,MACA,MACA,MACA,QACA,QACA,OACA,KACA,KACA,KACA,KACA,QACA,KACA,OACA,OACA,KACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,QA1LAmB,gBAAiB,KAEnBpH,UAAW,CACTN,OAAQ,CC5CG,2BCAA,2BCAA,8BH+CT4I,GAAS,CACbjE,KAAK,EACL9C,SAAU,CACR,CAAEnK,KAAM,IAAKuE,MAAO,aACpB,CAAEvE,KAAM,IAAKuE,MAAO,aACpB,CAAEvE,KAAM,IAAKuE,MAAO,aACpB,CAAEA,MAAO,cAEX2F,QAAS,GACTkD,QAAS,CACPyB,OA0FK,CACL,KACA,KACA,MACA,MACA,MACA,MACA,QACA,QACA,OACA,KACA,KACA,KACA,KACA,QACA,KACA,OACA,OACA,KACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,QAzKAD,WAAW,EACXoB,gBAAiB,SAGR,CACX/C,IADW,yrKAEX9C,SAAU,GACVD,QAAS,CAAC,CACRlK,KAAM,IACNuE,MAAO,SACPkD,MAAOoJ,EACPjJ,KAAM,CAAC,GAAI,KACV,CACD5H,KAAM,IACNuE,MAAO,SACPkD,MAAOqJ,EACPlJ,KAAM,CAAC,GAAI,KAEb,CACE5H,KAAM,IAAKuE,MAAO,SAAUkD,MAAOsJ,EAAInJ,KAAM,CAAC,GAAI,MAEpDwF,QAAS,CACPyB,OAmEK,CACL,KACA,KACA,MACA,MACA,MACA,MACA,QACA,QACA,OACA,KACA,KACA,KACA,KACA,QACA,KACA,OACA,OACA,KACA,MACA,QACA,QACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,MACA,MACA,KACA,OACA,OACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,OACA,KACA,KACA,KACA,KACA,QAlJAmB,gBAAiB,MAKfmB,GAAK,IAAI5G,EAAYyG,EAAG3J,GAE9B8J,GAAGzD,aAAa,EAAI0D,EAAO5S,OAC3B4S,EAAOC,SAAW,WAChBF,GAAGzD,aAAa,EAAI0D,EAAO5S,QAG7B2S,GAAG1Q,GAAG,eAAe,SAAU+F,GAC7B2K,GAAG5F,aAAa/E,EAAExG,SAGpB0K,EAAO2G,SAAW,WAChB,IAAM7P,EAAIkJ,EAAOlM,MAAQ8S,OAAO5G,EAAOlM,OAAS,EACtC,KAANgD,GACF2P,GAAGI,aAAa,IAChBP,EAAEjM,MAAM/D,MAAQ,QAChBgQ,EAAEjM,MAAMG,UAAY,kBACJ,KAAP1D,GACT2P,GAAGI,cAAc,IACjBP,EAAEjM,MAAM/D,MAAQ,QAChBgQ,EAAEjM,MAAMG,UAAY,mBAEpBiM,GAAGI,aAAa,GAChBP,EAAEjM,MAAM/D,MAAQ,GAChBgQ,EAAEjM,MAAMG,UAAY,KAIxBuE,EAAK4H,SAAW,WACdF,GAAGK,aAAa,CACd/H,OAAQA,EAAKgI,WAIjBC,EAAQL,SAAW,WACbK,EAAQD,SACNE,EAASF,UAASE,EAASF,SAAU,GACzCN,GAAGK,aAAaN,KAEhBC,GAAGK,aAAanK,GAElB8J,GAAGjU,GAAG6H,MAAM6M,YAAY,kBAAmB,QAC3CT,GAAG5F,aAAa,GAChB4F,GAAGzD,aAAa,EAAI0D,EAAO5S,QAG7BmT,EAASN,SAAW,WACdM,EAASF,SACPC,EAAQD,UAASC,EAAQD,SAAU,GACvCN,GAAGK,aAAaK,IAChBV,GAAGjU,GAAG6H,MAAM6M,YAAY,kBAAmB,yBAG3CT,GAAGK,aAAanK,GAChB8J,GAAGjU,GAAG6H,MAAM6M,YAAY,kBAAmB,SAE7CT,GAAG5F,aAAa,GAChB4F,GAAGzD,aAAa,EAAI0D,EAAO5S"}